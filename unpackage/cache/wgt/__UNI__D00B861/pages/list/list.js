"use weex:vue";

if (typeof Promise !== 'undefined' && !Promise.prototype.finally) {
  Promise.prototype.finally = function(callback) {
    const promise = this.constructor
    return this.then(
      value => promise.resolve(callback()).then(() => value),
      reason => promise.resolve(callback()).then(() => {
        throw reason
      })
    )
  }
};

if (typeof uni !== 'undefined' && uni && uni.requireGlobal) {
  const global = uni.requireGlobal()
  ArrayBuffer = global.ArrayBuffer
  Int8Array = global.Int8Array
  Uint8Array = global.Uint8Array
  Uint8ClampedArray = global.Uint8ClampedArray
  Int16Array = global.Int16Array
  Uint16Array = global.Uint16Array
  Int32Array = global.Int32Array
  Uint32Array = global.Uint32Array
  Float32Array = global.Float32Array
  Float64Array = global.Float64Array
  BigInt64Array = global.BigInt64Array
  BigUint64Array = global.BigUint64Array
};


(()=>{var us=Object.create;var Xe=Object.defineProperty,ds=Object.defineProperties,hs=Object.getOwnPropertyDescriptor,fs=Object.getOwnPropertyDescriptors,ps=Object.getOwnPropertyNames,Dt=Object.getOwnPropertySymbols,gs=Object.getPrototypeOf,Mt=Object.prototype.hasOwnProperty,ms=Object.prototype.propertyIsEnumerable;var Nt=(t,e,n)=>e in t?Xe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,j=(t,e)=>{for(var n in e||(e={}))Mt.call(e,n)&&Nt(t,n,e[n]);if(Dt)for(var n of Dt(e))ms.call(e,n)&&Nt(t,n,e[n]);return t},K=(t,e)=>ds(t,fs(e));var ys=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var _s=(t,e,n,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of ps(e))!Mt.call(t,o)&&o!==n&&Xe(t,o,{get:()=>e[o],enumerable:!(s=hs(e,o))||s.enumerable});return t};var Ut=(t,e,n)=>(n=t!=null?us(gs(t)):{},_s(e||!t||!t.__esModule?Xe(n,"default",{value:t,enumerable:!0}):n,t));var L=(t,e,n)=>new Promise((s,o)=>{var i=l=>{try{a(n.next(l))}catch(c){o(c)}},r=l=>{try{a(n.throw(l))}catch(c){o(c)}},a=l=>l.done?s(l.value):Promise.resolve(l.value).then(i,r);a((n=n.apply(t,e)).next())});var Ze=ys((Br,Ft)=>{Ft.exports=Vue});var g=Ut(Ze());var $=(t,e)=>{let n=t.__vccOpts||t;for(let[s,o]of e)n[s]=o;return n};var ws=Object.prototype.hasOwnProperty,bs=(t,e)=>ws.call(t,e),vs="__uniSSR",bn="data",Ss="globalData";function ks(){return(0,g.getCurrentInstance)()?bn:Ss}function xs(t,e=!1){if(!t)throw new Error(`${e?"shallowSsrRef":"ssrRef"}: You must provide a key.`)}var vn=(t,e,n=!1)=>{let s=n?(0,g.shallowRef)(t):(0,g.ref)(t);if(typeof window=="undefined")return s;let o=window[vs];if(!o)return s;let i=ks();return xs(e,n),bs(o[i],e)&&(s.value=o[i][e],i===bn&&delete o[i][e]),s},Bt=(t,e)=>vn(t,e),qt=(t,e)=>vn(t,e,!0);function R(t,e,...n){uni.__log__?uni.__log__(t,e,...n):console[t].apply(console,[...n,e])}function W(t,e){return typeof t=="string"?e:t}var Ts=[{path:"pages/list/list",style:{navigationStyle:"custom"}},{path:"pages/grid/grid",style:{navigationStyle:"custom"}},{path:"pages/list/search/search",style:{navigationBarTitleText:"\u641C\u7D22"}},{path:"pages/list/detail",style:{"app-plus":{titleNView:{buttons:[{type:"share"}],type:"transparent"}},h5:{titleNView:{type:"transparent"}},navigationBarTitleText:"\u6587\u7AE0\u8BE6\u60C5"}},{path:"pages/ucenter/ucenter",style:{navigationStyle:"custom"}},{path:"pages/uni-agree/uni-agree",style:{navigationStyle:"custom","app-plus":{popGesture:"none"}}},{path:"pages/ucenter/settings/settings",style:{navigationBarTitleText:"\u8BBE\u7F6E"}},{path:"pages/ucenter/read-news-log/read-news-log",style:{navigationBarTitleText:"\u9605\u8BFB\u8BB0\u5F55",enablePullDownRefresh:!0}},{path:"pages/ucenter/about/about",style:{navigationBarTitleText:"\u5173\u4E8E","app-plus":{titleNView:{buttons:[{type:"share"}]}}}},{path:"uni_modules/uni-upgrade-center-app/pages/upgrade-popup",style:{disableScroll:!0,"app-plus":{backgroundColorTop:"transparent",background:"transparent",titleNView:!1,scrollIndicator:!1,popGesture:"none",animationType:"fade-in",animationDuration:200}}},{path:"pages/ucenter/invite/invite",style:{navigationStyle:"custom",enablePullDownRefresh:!1}},{path:"pages/opendb-mall-goods/add",style:{navigationBarTitleText:"\u65B0\u589E"}},{path:"pages/opendb-mall-goods/edit",style:{navigationBarTitleText:"\u7F16\u8F91"}},{path:"pages/opendb-mall-goods/list",style:{navigationBarTitleText:"\u5217\u8868"}},{path:"pages/opendb-mall-goods/detail",style:{navigationBarTitleText:"\u8BE6\u60C5"}}],Is=[{root:"uni_modules/uni-feedback",pages:[{path:"pages/opendb-feedback/opendb-feedback",style:{navigationBarTitleText:"\u610F\u89C1\u53CD\u9988",enablePullDownRefresh:!1}}]},{root:"uni_modules/uni-id-pages/pages",pages:[{path:"userinfo/userinfo",style:{navigationBarTitleText:"\u4E2A\u4EBA\u8D44\u6599"}},{path:"userinfo/realname-verify/realname-verify",style:{enablePullDownRefresh:!1,navigationBarTitleText:"\u5B9E\u540D\u8BA4\u8BC1"}},{path:"login/login-withoutpwd"},{path:"login/login-withpwd"},{path:"userinfo/deactivate/deactivate",style:{navigationBarTitleText:"\u6CE8\u9500\u8D26\u53F7"}},{path:"userinfo/bind-mobile/bind-mobile",style:{navigationBarTitleText:"\u7ED1\u5B9A\u624B\u673A\u53F7\u7801"}},{path:"login/login-smscode",style:{navigationBarTitleText:"\u624B\u673A\u9A8C\u8BC1\u7801\u767B\u5F55"}},{path:"register/register",style:{navigationBarTitleText:"\u6CE8\u518C"}},{path:"retrieve/retrieve",style:{navigationBarTitleText:"\u91CD\u7F6E\u5BC6\u7801"}},{path:"common/webview/webview",style:{enablePullDownRefresh:!1,navigationBarTitleText:""}},{path:"userinfo/change_pwd/change_pwd",style:{enablePullDownRefresh:!1,navigationBarTitleText:"\u4FEE\u6539\u5BC6\u7801"}},{path:"register/register-by-email",style:{navigationBarTitleText:"\u90AE\u7BB1\u9A8C\u8BC1\u7801\u6CE8\u518C"}},{path:"retrieve/retrieve-by-email",style:{navigationBarTitleText:"\u901A\u8FC7\u90AE\u7BB1\u91CD\u7F6E\u5BC6\u7801"}},{path:"userinfo/set-pwd/set-pwd",style:{enablePullDownRefresh:!1,navigationBarTitleText:"\u8BBE\u7F6E\u5BC6\u7801"}}]}],As={navigationBarTextStyle:"black",navigationBarTitleText:"\u6CB9\u4EAB",navigationBarBackgroundColor:"#FFFFFF",backgroundColor:"#F8F8F8",enablePullDownRefresh:!1,rpxCalcMaxDeviceWidth:375,rpxCalcBaseDeviceWidth:375},Ps={list:[{path:"pages/list/detail"},{path:"pages/list/list"},{path:"pages/ucenter/settings/settings"}],current:1},Cs={color:"#7A7E83",selectedColor:"#007AFF",borderStyle:"black",backgroundColor:"#FFFFFF",list:[{pagePath:"pages/list/list",iconPath:"static/tabbar/list.png",selectedIconPath:"static/tabbar/list_active.png",text:"\u6CB9\u5361"},{pagePath:"pages/opendb-mall-goods/list",iconPath:"static/tabbar/grid.png",selectedIconPath:"static/tabbar/grid_active.png",text:"\u5546\u54C1\u6DFB\u52A0"},{pagePath:"pages/ucenter/ucenter",iconPath:"static/tabbar/me.png",selectedIconPath:"static/tabbar/me_active.png",text:"\u6211\u7684"}]},Ls={loginPage:"uni_modules/uni-id-pages/pages/login/login-withpwd",needLogin:["/uni_modules/uni-id-pages/pages/userinfo/userinfo"],resToLogin:!0},Sn={pages:Ts,subPackages:Is,globalStyle:As,condition:Ps,tabBar:Cs,uniIdRouter:Ls},Os=[];function Es(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Q(t,e,n){return t(n={path:e,exports:{},require:function(s,o){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(o==null&&n.path)}},n.exports),n.exports}var Rs=Q(function(t,e){var n;t.exports=(n=n||function(s,o){var i=Object.create||function(){function u(){}return function(f){var w;return u.prototype=f,w=new u,u.prototype=null,w}}(),r={},a=r.lib={},l=a.Base={extend:function(u){var f=i(this);return u&&f.mixIn(u),f.hasOwnProperty("init")&&this.init!==f.init||(f.init=function(){f.$super.init.apply(this,arguments)}),f.init.prototype=f,f.$super=this,f},create:function(){var u=this.extend();return u.init.apply(u,arguments),u},init:function(){},mixIn:function(u){for(var f in u)u.hasOwnProperty(f)&&(this[f]=u[f]);u.hasOwnProperty("toString")&&(this.toString=u.toString)},clone:function(){return this.init.prototype.extend(this)}},c=a.WordArray=l.extend({init:function(u,f){u=this.words=u||[],this.sigBytes=f!=o?f:4*u.length},toString:function(u){return(u||h).stringify(this)},concat:function(u){var f=this.words,w=u.words,v=this.sigBytes,b=u.sigBytes;if(this.clamp(),v%4)for(var A=0;A<b;A++){var C=w[A>>>2]>>>24-A%4*8&255;f[v+A>>>2]|=C<<24-(v+A)%4*8}else for(A=0;A<b;A+=4)f[v+A>>>2]=w[A>>>2];return this.sigBytes+=b,this},clamp:function(){var u=this.words,f=this.sigBytes;u[f>>>2]&=4294967295<<32-f%4*8,u.length=s.ceil(f/4)},clone:function(){var u=l.clone.call(this);return u.words=this.words.slice(0),u},random:function(u){for(var f,w=[],v=function(C){C=C;var O=987654321,E=4294967295;return function(){var D=((O=36969*(65535&O)+(O>>16)&E)<<16)+(C=18e3*(65535&C)+(C>>16)&E)&E;return D/=4294967296,(D+=.5)*(s.random()>.5?1:-1)}},b=0;b<u;b+=4){var A=v(4294967296*(f||s.random()));f=987654071*A(),w.push(4294967296*A()|0)}return new c.init(w,u)}}),p=r.enc={},h=p.Hex={stringify:function(u){for(var f=u.words,w=u.sigBytes,v=[],b=0;b<w;b++){var A=f[b>>>2]>>>24-b%4*8&255;v.push((A>>>4).toString(16)),v.push((15&A).toString(16))}return v.join("")},parse:function(u){for(var f=u.length,w=[],v=0;v<f;v+=2)w[v>>>3]|=parseInt(u.substr(v,2),16)<<24-v%8*4;return new c.init(w,f/2)}},m=p.Latin1={stringify:function(u){for(var f=u.words,w=u.sigBytes,v=[],b=0;b<w;b++){var A=f[b>>>2]>>>24-b%4*8&255;v.push(String.fromCharCode(A))}return v.join("")},parse:function(u){for(var f=u.length,w=[],v=0;v<f;v++)w[v>>>2]|=(255&u.charCodeAt(v))<<24-v%4*8;return new c.init(w,f)}},_=p.Utf8={stringify:function(u){try{return decodeURIComponent(escape(m.stringify(u)))}catch(f){throw new Error("Malformed UTF-8 data")}},parse:function(u){return m.parse(unescape(encodeURIComponent(u)))}},y=a.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(u){typeof u=="string"&&(u=_.parse(u)),this._data.concat(u),this._nDataBytes+=u.sigBytes},_process:function(u){var f=this._data,w=f.words,v=f.sigBytes,b=this.blockSize,A=v/(4*b),C=(A=u?s.ceil(A):s.max((0|A)-this._minBufferSize,0))*b,O=s.min(4*C,v);if(C){for(var E=0;E<C;E+=b)this._doProcessBlock(w,E);var D=w.splice(0,C);f.sigBytes-=O}return new c.init(D,O)},clone:function(){var u=l.clone.call(this);return u._data=this._data.clone(),u},_minBufferSize:0});a.Hasher=y.extend({cfg:l.extend(),init:function(u){this.cfg=this.cfg.extend(u),this.reset()},reset:function(){y.reset.call(this),this._doReset()},update:function(u){return this._append(u),this._process(),this},finalize:function(u){return u&&this._append(u),this._doFinalize()},blockSize:16,_createHelper:function(u){return function(f,w){return new u.init(w).finalize(f)}},_createHmacHelper:function(u){return function(f,w){return new d.HMAC.init(u,w).finalize(f)}}});var d=r.algo={};return r}(Math),n)}),te=Rs,js=(Q(function(t,e){var n;t.exports=(n=te,function(s){var o=n,i=o.lib,r=i.WordArray,a=i.Hasher,l=o.algo,c=[];(function(){for(var d=0;d<64;d++)c[d]=4294967296*s.abs(s.sin(d+1))|0})();var p=l.MD5=a.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(d,u){for(var f=0;f<16;f++){var w=u+f,v=d[w];d[w]=16711935&(v<<8|v>>>24)|4278255360&(v<<24|v>>>8)}var b=this._hash.words,A=d[u+0],C=d[u+1],O=d[u+2],E=d[u+3],D=d[u+4],X=d[u+5],z=d[u+6],oe=d[u+7],Z=d[u+8],le=d[u+9],ie=d[u+10],Ae=d[u+11],Pe=d[u+12],Ce=d[u+13],Le=d[u+14],Oe=d[u+15],k=b[0],I=b[1],x=b[2],T=b[3];k=h(k,I,x,T,A,7,c[0]),T=h(T,k,I,x,C,12,c[1]),x=h(x,T,k,I,O,17,c[2]),I=h(I,x,T,k,E,22,c[3]),k=h(k,I,x,T,D,7,c[4]),T=h(T,k,I,x,X,12,c[5]),x=h(x,T,k,I,z,17,c[6]),I=h(I,x,T,k,oe,22,c[7]),k=h(k,I,x,T,Z,7,c[8]),T=h(T,k,I,x,le,12,c[9]),x=h(x,T,k,I,ie,17,c[10]),I=h(I,x,T,k,Ae,22,c[11]),k=h(k,I,x,T,Pe,7,c[12]),T=h(T,k,I,x,Ce,12,c[13]),x=h(x,T,k,I,Le,17,c[14]),k=m(k,I=h(I,x,T,k,Oe,22,c[15]),x,T,C,5,c[16]),T=m(T,k,I,x,z,9,c[17]),x=m(x,T,k,I,Ae,14,c[18]),I=m(I,x,T,k,A,20,c[19]),k=m(k,I,x,T,X,5,c[20]),T=m(T,k,I,x,ie,9,c[21]),x=m(x,T,k,I,Oe,14,c[22]),I=m(I,x,T,k,D,20,c[23]),k=m(k,I,x,T,le,5,c[24]),T=m(T,k,I,x,Le,9,c[25]),x=m(x,T,k,I,E,14,c[26]),I=m(I,x,T,k,Z,20,c[27]),k=m(k,I,x,T,Ce,5,c[28]),T=m(T,k,I,x,O,9,c[29]),x=m(x,T,k,I,oe,14,c[30]),k=_(k,I=m(I,x,T,k,Pe,20,c[31]),x,T,X,4,c[32]),T=_(T,k,I,x,Z,11,c[33]),x=_(x,T,k,I,Ae,16,c[34]),I=_(I,x,T,k,Le,23,c[35]),k=_(k,I,x,T,C,4,c[36]),T=_(T,k,I,x,D,11,c[37]),x=_(x,T,k,I,oe,16,c[38]),I=_(I,x,T,k,ie,23,c[39]),k=_(k,I,x,T,Ce,4,c[40]),T=_(T,k,I,x,A,11,c[41]),x=_(x,T,k,I,E,16,c[42]),I=_(I,x,T,k,z,23,c[43]),k=_(k,I,x,T,le,4,c[44]),T=_(T,k,I,x,Pe,11,c[45]),x=_(x,T,k,I,Oe,16,c[46]),k=y(k,I=_(I,x,T,k,O,23,c[47]),x,T,A,6,c[48]),T=y(T,k,I,x,oe,10,c[49]),x=y(x,T,k,I,Le,15,c[50]),I=y(I,x,T,k,X,21,c[51]),k=y(k,I,x,T,Pe,6,c[52]),T=y(T,k,I,x,E,10,c[53]),x=y(x,T,k,I,ie,15,c[54]),I=y(I,x,T,k,C,21,c[55]),k=y(k,I,x,T,Z,6,c[56]),T=y(T,k,I,x,Oe,10,c[57]),x=y(x,T,k,I,z,15,c[58]),I=y(I,x,T,k,Ce,21,c[59]),k=y(k,I,x,T,D,6,c[60]),T=y(T,k,I,x,Ae,10,c[61]),x=y(x,T,k,I,O,15,c[62]),I=y(I,x,T,k,le,21,c[63]),b[0]=b[0]+k|0,b[1]=b[1]+I|0,b[2]=b[2]+x|0,b[3]=b[3]+T|0},_doFinalize:function(){var d=this._data,u=d.words,f=8*this._nDataBytes,w=8*d.sigBytes;u[w>>>5]|=128<<24-w%32;var v=s.floor(f/4294967296),b=f;u[15+(w+64>>>9<<4)]=16711935&(v<<8|v>>>24)|4278255360&(v<<24|v>>>8),u[14+(w+64>>>9<<4)]=16711935&(b<<8|b>>>24)|4278255360&(b<<24|b>>>8),d.sigBytes=4*(u.length+1),this._process();for(var A=this._hash,C=A.words,O=0;O<4;O++){var E=C[O];C[O]=16711935&(E<<8|E>>>24)|4278255360&(E<<24|E>>>8)}return A},clone:function(){var d=a.clone.call(this);return d._hash=this._hash.clone(),d}});function h(d,u,f,w,v,b,A){var C=d+(u&f|~u&w)+v+A;return(C<<b|C>>>32-b)+u}function m(d,u,f,w,v,b,A){var C=d+(u&w|f&~w)+v+A;return(C<<b|C>>>32-b)+u}function _(d,u,f,w,v,b,A){var C=d+(u^f^w)+v+A;return(C<<b|C>>>32-b)+u}function y(d,u,f,w,v,b,A){var C=d+(f^(u|~w))+v+A;return(C<<b|C>>>32-b)+u}o.MD5=a._createHelper(p),o.HmacMD5=a._createHmacHelper(p)}(Math),n.MD5)}),Q(function(t,e){var n;t.exports=(n=te,void function(){var s=n,o=s.lib.Base,i=s.enc.Utf8;s.algo.HMAC=o.extend({init:function(r,a){r=this._hasher=new r.init,typeof a=="string"&&(a=i.parse(a));var l=r.blockSize,c=4*l;a.sigBytes>c&&(a=r.finalize(a)),a.clamp();for(var p=this._oKey=a.clone(),h=this._iKey=a.clone(),m=p.words,_=h.words,y=0;y<l;y++)m[y]^=1549556828,_[y]^=909522486;p.sigBytes=h.sigBytes=c,this.reset()},reset:function(){var r=this._hasher;r.reset(),r.update(this._iKey)},update:function(r){return this._hasher.update(r),this},finalize:function(r){var a=this._hasher,l=a.finalize(r);return a.reset(),a.finalize(this._oKey.clone().concat(l))}})}())}),Q(function(t,e){t.exports=te.HmacMD5})),Ds=Q(function(t,e){t.exports=te.enc.Utf8}),Ns=Q(function(t,e){var n;t.exports=(n=te,function(){var s=n,o=s.lib.WordArray;function i(r,a,l){for(var c=[],p=0,h=0;h<a;h++)if(h%4){var m=l[r.charCodeAt(h-1)]<<h%4*2,_=l[r.charCodeAt(h)]>>>6-h%4*2;c[p>>>2]|=(m|_)<<24-p%4*8,p++}return o.create(c,p)}s.enc.Base64={stringify:function(r){var a=r.words,l=r.sigBytes,c=this._map;r.clamp();for(var p=[],h=0;h<l;h+=3)for(var m=(a[h>>>2]>>>24-h%4*8&255)<<16|(a[h+1>>>2]>>>24-(h+1)%4*8&255)<<8|a[h+2>>>2]>>>24-(h+2)%4*8&255,_=0;_<4&&h+.75*_<l;_++)p.push(c.charAt(m>>>6*(3-_)&63));var y=c.charAt(64);if(y)for(;p.length%4;)p.push(y);return p.join("")},parse:function(r){var a=r.length,l=this._map,c=this._reverseMap;if(!c){c=this._reverseMap=[];for(var p=0;p<l.length;p++)c[l.charCodeAt(p)]=p}var h=l.charAt(64);if(h){var m=r.indexOf(h);m!==-1&&(a=m)}return i(r,a,c)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)}),zt="FUNCTION",Ms="OBJECT",Us="CLIENT_DB",Kt="pending",Fs="fulfilled",$t="rejected";function be(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function kn(t){return be(t)==="object"}function xn(t){return typeof t=="function"}function Bs(t){return function(){try{return t.apply(t,arguments)}catch(e){console.error(e)}}}var Ht="REJECTED",Tn="NOT_PENDING",Ue=class{constructor({createPromise:e,retryRule:n=Ht}={}){this.createPromise=e,this.status=null,this.promise=null,this.retryRule=n}get needRetry(){if(!this.status)return!0;switch(this.retryRule){case Ht:return this.status===$t;case Tn:return this.status!==Kt}}exec(){return this.needRetry?(this.status=Kt,this.promise=this.createPromise().then(e=>(this.status=Fs,Promise.resolve(e)),e=>(this.status=$t,Promise.reject(e))),this.promise):this.promise}};function At(t){return t&&typeof t=="string"?JSON.parse(t):t}var qs=!1,zs="app",Ks=At(Os),In=zs;At("");var $s=At('[{"provider":"alipay","spaceName":"test-scope","spaceId":"env-00jxgryr0yj2","spaceAppId":"2021004144641996","accessKey":"4rXDJj7p43jhZePF","secretKey":"a48n4jmtKRuhUskb"}]')||[],Hs="";try{Hs="__UNI__D00B861"}catch(t){}var Me={};function he(t,e={}){var n,s;return n=Me,s=t,Object.prototype.hasOwnProperty.call(n,s)||(Me[t]=e),Me[t]}Me=uni._globalUniCloudObj?uni._globalUniCloudObj:uni._globalUniCloudObj={};var An=["invoke","success","fail","complete"],J=he("_globalUniCloudInterceptor");function Pn(t,e){J[t]||(J[t]={}),kn(e)&&Object.keys(e).forEach(n=>{An.indexOf(n)>-1&&function(s,o,i){let r=J[s][o];r||(r=J[s][o]=[]),r.indexOf(i)===-1&&xn(i)&&r.push(i)}(t,n,e[n])})}function Vs(t,e){J[t]||(J[t]={}),kn(e)?Object.keys(e).forEach(n=>{An.indexOf(n)>-1&&function(s,o,i){let r=J[s][o];if(!r)return;let a=r.indexOf(i);a>-1&&r.splice(a,1)}(t,n,e[n])}):delete J[t]}function U(t,e){return t&&t.length!==0?t.reduce((n,s)=>n.then(()=>s(e)),Promise.resolve()):Promise.resolve()}function F(t,e){return J[t]&&J[t][e]||[]}function Ws(t){Pn("callObject",t)}var et=he("_globalUniCloudListener"),G="response",fe="needLogin",Fe="refreshToken",Vt="clientdb",Ee="cloudfunction",Wt="cloudobject";function xe(t){return et[t]||(et[t]=[]),et[t]}function tt(t,e){let n=xe(t);n.includes(e)||n.push(e)}function nt(t,e){let n=xe(t),s=n.indexOf(e);s!==-1&&n.splice(s,1)}function H(t,e){let n=xe(t);for(let s=0;s<n.length;s++)(0,n[s])(e)}var st,ot=!1;function Cn(){return st||(st=new Promise(t=>{ot&&t(),function e(){if(typeof getCurrentPages=="function"){let n=getCurrentPages();n&&n[0]&&(ot=!0,t())}ot||setTimeout(()=>{e()},30)}()}),st)}function Ln(t){let e={};for(let n in t){let s=t[n];xn(s)&&(e[n]=Bs(s))}return e}var P=class extends Error{constructor(e){super(e.message),this.errMsg=e.message||e.errMsg||"unknown system error",this.code=this.errCode=e.code||e.errCode||"SYSTEM_ERROR",this.errSubject=this.subject=e.subject||e.errSubject,this.cause=e.cause,this.requestId=e.requestId}toJson(e=0){if(!(e>=10))return e++,{errCode:this.errCode,errMsg:this.errMsg,errSubject:this.errSubject,cause:this.cause&&this.cause.toJson?this.cause.toJson(e):this.cause}}},B={request:t=>uni.request(t),uploadFile:t=>uni.uploadFile(t),setStorageSync:(t,e)=>uni.setStorageSync(t,e),getStorageSync:t=>uni.getStorageSync(t),removeStorageSync:t=>uni.removeStorageSync(t),clearStorageSync:()=>uni.clearStorageSync()};function On(t){return t&&On(t.__v_raw)||t}function We(){return{token:B.getStorageSync("uni_id_token")||B.getStorageSync("uniIdToken"),tokenExpired:B.getStorageSync("uni_id_token_expired")}}function En({token:t,tokenExpired:e}={}){t&&B.setStorageSync("uni_id_token",t),e&&B.setStorageSync("uni_id_token_expired",e)}var it,Re;function Rn(){return it||(it=uni.getSystemInfoSync()),it}function Js(){let t,e;try{if(uni.getLaunchOptionsSync){if(uni.getLaunchOptionsSync.toString().indexOf("not yet implemented")>-1)return;let{scene:n,channel:s}=uni.getLaunchOptionsSync();t=s,e=n}}catch(n){}return{channel:t,scene:e}}function jn(){let t=uni.getLocale&&uni.getLocale()||"en";if(Re)return K(j({},Re),{locale:t,LOCALE:t});let e=Rn(),{deviceId:n,osName:s,uniPlatform:o,appId:i}=e,r=["pixelRatio","brand","model","system","language","version","platform","host","SDKVersion","swanNativeVersion","app","AppPlatform","fontSizeSetting"];for(let a=0;a<r.length;a++)delete e[r[a]];return Re=j(j({PLATFORM:o,OS:s,APPID:i,DEVICEID:n},Js()),e),K(j({},Re),{locale:t,LOCALE:t})}var ye={sign:function(t,e){let n="";return Object.keys(t).sort().forEach(function(s){t[s]&&(n=n+"&"+s+"="+t[s])}),n=n.slice(1),js(n,e).toString()},wrappedRequest:function(t,e){return new Promise((n,s)=>{e(Object.assign(t,{complete(o){o||(o={});let i=o.data&&o.data.header&&o.data.header["x-serverless-request-id"]||o.header&&o.header["request-id"];if(!o.statusCode||o.statusCode>=400){let a=o.data&&o.data.error&&o.data.error.code||"SYS_ERR",l=o.data&&o.data.error&&o.data.error.message||o.errMsg||"request:fail";return s(new P({code:a,message:l,requestId:i}))}let r=o.data;if(r.error)return s(new P({code:r.error.code,message:r.error.message,requestId:i}));r.result=r.data,r.requestId=i,delete r.data,n(r)}}))})},toBase64:function(t){return Ns.stringify(Ds.parse(t))}},Dn=class{constructor(t){["spaceId","clientSecret"].forEach(e=>{if(!Object.prototype.hasOwnProperty.call(t,e))throw new Error(`${e} required`)}),this.config=Object.assign({},{endpoint:t.spaceId.indexOf("mp-")===0?"https://api.next.bspapp.com":"https://api.bspapp.com"},t),this.config.provider="aliyun",this.config.requestUrl=this.config.endpoint+"/client",this.config.envType=this.config.envType||"public",this.config.accessTokenKey="access_token_"+this.config.spaceId,this.adapter=B,this._getAccessTokenPromiseHub=new Ue({createPromise:()=>this.requestAuth(this.setupRequest({method:"serverless.auth.user.anonymousAuthorize",params:"{}"},"auth")).then(e=>{if(!e.result||!e.result.accessToken)throw new P({code:"AUTH_FAILED",message:"\u83B7\u53D6accessToken\u5931\u8D25"});this.setAccessToken(e.result.accessToken)}),retryRule:Tn})}get hasAccessToken(){return!!this.accessToken}setAccessToken(t){this.accessToken=t}requestWrapped(t){return ye.wrappedRequest(t,this.adapter.request)}requestAuth(t){return this.requestWrapped(t)}request(t,e){return Promise.resolve().then(()=>this.hasAccessToken?e?this.requestWrapped(t):this.requestWrapped(t).catch(n=>new Promise((s,o)=>{!n||n.code!=="GATEWAY_INVALID_TOKEN"&&n.code!=="InvalidParameter.InvalidToken"?o(n):s()}).then(()=>this.getAccessToken()).then(()=>{let s=this.rebuildRequest(t);return this.request(s,!0)})):this.getAccessToken().then(()=>{let n=this.rebuildRequest(t);return this.request(n,!0)}))}rebuildRequest(t){let e=Object.assign({},t);return e.data.token=this.accessToken,e.header["x-basement-token"]=this.accessToken,e.header["x-serverless-sign"]=ye.sign(e.data,this.config.clientSecret),e}setupRequest(t,e){let n=Object.assign({},t,{spaceId:this.config.spaceId,timestamp:Date.now()}),s={"Content-Type":"application/json"};return e!=="auth"&&(n.token=this.accessToken,s["x-basement-token"]=this.accessToken),s["x-serverless-sign"]=ye.sign(n,this.config.clientSecret),{url:this.config.requestUrl,method:"POST",data:n,dataType:"json",header:s}}getAccessToken(){return this._getAccessTokenPromiseHub.exec()}authorize(){return L(this,null,function*(){yield this.getAccessToken()})}callFunction(t){let e={method:"serverless.function.runtime.invoke",params:JSON.stringify({functionTarget:t.name,functionArgs:t.data||{}})};return this.request(this.setupRequest(e))}getOSSUploadOptionsFromPath(t){let e={method:"serverless.file.resource.generateProximalSign",params:JSON.stringify(t)};return this.request(this.setupRequest(e))}uploadFileToOSS({url:t,formData:e,name:n,filePath:s,fileType:o,onUploadProgress:i}){return new Promise((r,a)=>{let l=this.adapter.uploadFile({url:t,formData:e,name:n,filePath:s,fileType:o,header:{"X-OSS-server-side-encrpytion":"AES256"},success(c){c&&c.statusCode<400?r(c):a(new P({code:"UPLOAD_FAILED",message:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))},fail(c){a(new P({code:c.code||"UPLOAD_FAILED",message:c.message||c.errMsg||"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))}});typeof i=="function"&&l&&typeof l.onProgressUpdate=="function"&&l.onProgressUpdate(c=>{i({loaded:c.totalBytesSent,total:c.totalBytesExpectedToSend})})})}reportOSSUpload(t){let e={method:"serverless.file.resource.report",params:JSON.stringify(t)};return this.request(this.setupRequest(e))}uploadFile(r){return L(this,arguments,function*({filePath:t,cloudPath:e,fileType:n="image",cloudPathAsRealPath:s=!1,onUploadProgress:o,config:i}){if(be(e)!=="string")throw new P({code:"INVALID_PARAM",message:"cloudPath\u5FC5\u987B\u4E3A\u5B57\u7B26\u4E32\u7C7B\u578B"});if(!(e=e.trim()))throw new P({code:"INVALID_PARAM",message:"cloudPath\u4E0D\u53EF\u4E3A\u7A7A"});if(/:\/\//.test(e))throw new P({code:"INVALID_PARAM",message:"cloudPath\u4E0D\u5408\u6CD5"});let a=i&&i.envType||this.config.envType;if(s&&(e[0]!=="/"&&(e="/"+e),e.indexOf("\\")>-1))throw new P({code:"INVALID_PARAM",message:"\u4F7F\u7528cloudPath\u4F5C\u4E3A\u8DEF\u5F84\u65F6\uFF0CcloudPath\u4E0D\u53EF\u5305\u542B\u201C\\\u201D"});let l=(yield this.getOSSUploadOptionsFromPath({env:a,filename:s?e.split("/").pop():e,fileId:s?e:void 0})).result,c="https://"+l.cdnDomain+"/"+l.ossPath,{securityToken:p,accessKeyId:h,signature:m,host:_,ossPath:y,id:d,policy:u,ossCallbackUrl:f}=l,w={"Cache-Control":"max-age=2592000","Content-Disposition":"attachment",OSSAccessKeyId:h,Signature:m,host:_,id:d,key:y,policy:u,success_action_status:200};if(p&&(w["x-oss-security-token"]=p),f){let b=JSON.stringify({callbackUrl:f,callbackBody:JSON.stringify({fileId:d,spaceId:this.config.spaceId}),callbackBodyType:"application/json"});w.callback=ye.toBase64(b)}let v={url:"https://"+l.host,formData:w,fileName:"file",name:"file",filePath:t,fileType:n};if(yield this.uploadFileToOSS(Object.assign({},v,{onUploadProgress:o})),f)return{success:!0,filePath:t,fileID:c};if((yield this.reportOSSUpload({id:d})).success)return{success:!0,filePath:t,fileID:c};throw new P({code:"UPLOAD_FAILED",message:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"})})}getTempFileURL({fileList:t}={}){return new Promise((e,n)=>{Array.isArray(t)&&t.length!==0||n(new P({code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u5B57\u7B26\u4E32"})),e({fileList:t.map(s=>({fileID:s,tempFileURL:s}))})})}getFileInfo(){return L(this,arguments,function*({fileList:t}={}){if(!Array.isArray(t)||t.length===0)throw new P({code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u5B57\u7B26\u4E32"});let e={method:"serverless.file.resource.info",params:JSON.stringify({id:t.map(n=>n.split("?")[0]).join(",")})};return{fileList:(yield this.request(this.setupRequest(e))).result}})}},Gs={init(t){let e=new Dn(t),n={signInAnonymously:function(){return e.authorize()},getLoginState:function(){return Promise.resolve(!1)}};return e.auth=function(){return n},e.customAuth=e.auth,e}},Qs=typeof location!="undefined"&&location.protocol==="http:"?"http:":"https:",Jt;(function(t){t.local="local",t.none="none",t.session="session"})(Jt||(Jt={}));var Ys=function(){},Xs=Q(function(t,e){var n;t.exports=(n=te,function(s){var o=n,i=o.lib,r=i.WordArray,a=i.Hasher,l=o.algo,c=[],p=[];(function(){function _(f){for(var w=s.sqrt(f),v=2;v<=w;v++)if(!(f%v))return!1;return!0}function y(f){return 4294967296*(f-(0|f))|0}for(var d=2,u=0;u<64;)_(d)&&(u<8&&(c[u]=y(s.pow(d,.5))),p[u]=y(s.pow(d,1/3)),u++),d++})();var h=[],m=l.SHA256=a.extend({_doReset:function(){this._hash=new r.init(c.slice(0))},_doProcessBlock:function(_,y){for(var d=this._hash.words,u=d[0],f=d[1],w=d[2],v=d[3],b=d[4],A=d[5],C=d[6],O=d[7],E=0;E<64;E++){if(E<16)h[E]=0|_[y+E];else{var D=h[E-15],X=(D<<25|D>>>7)^(D<<14|D>>>18)^D>>>3,z=h[E-2],oe=(z<<15|z>>>17)^(z<<13|z>>>19)^z>>>10;h[E]=X+h[E-7]+oe+h[E-16]}var Z=u&f^u&w^f&w,le=(u<<30|u>>>2)^(u<<19|u>>>13)^(u<<10|u>>>22),ie=O+((b<<26|b>>>6)^(b<<21|b>>>11)^(b<<7|b>>>25))+(b&A^~b&C)+p[E]+h[E];O=C,C=A,A=b,b=v+ie|0,v=w,w=f,f=u,u=ie+(le+Z)|0}d[0]=d[0]+u|0,d[1]=d[1]+f|0,d[2]=d[2]+w|0,d[3]=d[3]+v|0,d[4]=d[4]+b|0,d[5]=d[5]+A|0,d[6]=d[6]+C|0,d[7]=d[7]+O|0},_doFinalize:function(){var _=this._data,y=_.words,d=8*this._nDataBytes,u=8*_.sigBytes;return y[u>>>5]|=128<<24-u%32,y[14+(u+64>>>9<<4)]=s.floor(d/4294967296),y[15+(u+64>>>9<<4)]=d,_.sigBytes=4*y.length,this._process(),this._hash},clone:function(){var _=a.clone.call(this);return _._hash=this._hash.clone(),_}});o.SHA256=a._createHelper(m),o.HmacSHA256=a._createHmacHelper(m)}(Math),n.SHA256)}),Gt=Xs,Zs=Q(function(t,e){t.exports=te.HmacSHA256}),Te=()=>{let t;if(!Promise){t=()=>{},t.promise={};let n=()=>{throw new P({message:'Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.'})};return Object.defineProperty(t.promise,"then",{get:n}),Object.defineProperty(t.promise,"catch",{get:n}),t}let e=new Promise((n,s)=>{t=(o,i)=>o?s(o):n(i)});return t.promise=e,t};function eo(t){return t===void 0}function to(t){return Object.prototype.toString.call(t)==="[object Null]"}var Qt;function no(t){let e=(n=t,Object.prototype.toString.call(n)==="[object Array]"?t:[t]);var n;for(let s of e){let{isMatch:o,genAdapter:i,runtime:r}=s;if(o())return{adapter:i(),runtime:r}}}(function(t){t.WEB="web",t.WX_MP="wx_mp"})(Qt||(Qt={}));var M={adapter:null,runtime:void 0},so=["anonymousUuidKey"],_e=class extends Ys{constructor(){super(),M.adapter.root.tcbObject||(M.adapter.root.tcbObject={})}setItem(e,n){M.adapter.root.tcbObject[e]=n}getItem(e){return M.adapter.root.tcbObject[e]}removeItem(e){delete M.adapter.root.tcbObject[e]}clear(){delete M.adapter.root.tcbObject}};function Yt(t,e){switch(t){case"local":return e.localStorage||new _e;case"none":return new _e;default:return e.sessionStorage||new _e}}var Be=class{constructor(e){if(!this._storage){this._persistence=M.adapter.primaryStorage||e.persistence,this._storage=Yt(this._persistence,M.adapter);let n=`access_token_${e.env}`,s=`access_token_expire_${e.env}`,o=`refresh_token_${e.env}`,i=`anonymous_uuid_${e.env}`,r=`login_type_${e.env}`,a=`user_info_${e.env}`;this.keys={accessTokenKey:n,accessTokenExpireKey:s,refreshTokenKey:o,anonymousUuidKey:i,loginTypeKey:r,userInfoKey:a}}}updatePersistence(e){if(e===this._persistence)return;let n=this._persistence==="local";this._persistence=e;let s=Yt(e,M.adapter);for(let o in this.keys){let i=this.keys[o];if(n&&so.includes(o))continue;let r=this._storage.getItem(i);eo(r)||to(r)||(s.setItem(i,r),this._storage.removeItem(i))}this._storage=s}setStore(e,n,s){if(!this._storage)return;let o={version:s||"localCachev1",content:n},i=JSON.stringify(o);try{this._storage.setItem(e,i)}catch(r){throw r}}getStore(e,n){try{if(!this._storage)return}catch(o){return""}n=n||"localCachev1";let s=this._storage.getItem(e);return s&&s.indexOf(n)>=0?JSON.parse(s).content:""}removeStore(e){this._storage.removeItem(e)}},Nn={},Mn={};function Ie(t){return Nn[t]}var qe=class{constructor(e,n){this.data=n||null,this.name=e}},ft=class extends qe{constructor(e,n){super("error",{error:e,data:n}),this.error=e}},Pt=new class{constructor(){this._listeners={}}on(t,e){return function(n,s,o){o[n]=o[n]||[],o[n].push(s)}(t,e,this._listeners),this}off(t,e){return function(n,s,o){if(o&&o[n]){let i=o[n].indexOf(s);i!==-1&&o[n].splice(i,1)}}(t,e,this._listeners),this}fire(t,e){if(t instanceof ft)return console.error(t.error),this;let n=typeof t=="string"?new qe(t,e||{}):t,s=n.name;if(this._listens(s)){n.target=this;let o=this._listeners[s]?[...this._listeners[s]]:[];for(let i of o)i.call(this,n)}return this}_listens(t){return this._listeners[t]&&this._listeners[t].length>0}};function ee(t,e){Pt.on(t,e)}function q(t,e={}){Pt.fire(t,e)}function oo(t,e){Pt.off(t,e)}var pe="loginStateChanged",Un="loginStateExpire",ne="loginTypeChanged",pt="anonymousConverted",Fn="refreshAccessToken",N;(function(t){t.ANONYMOUS="ANONYMOUS",t.WECHAT="WECHAT",t.WECHAT_PUBLIC="WECHAT-PUBLIC",t.WECHAT_OPEN="WECHAT-OPEN",t.CUSTOM="CUSTOM",t.EMAIL="EMAIL",t.USERNAME="USERNAME",t.NULL="NULL"})(N||(N={}));var Xt=["auth.getJwt","auth.logout","auth.signInWithTicket","auth.signInAnonymously","auth.signIn","auth.fetchAccessTokenWithRefreshToken","auth.signUpWithEmailAndPassword","auth.activateEndUserMail","auth.sendPasswordResetEmail","auth.resetPasswordWithToken","auth.isUsernameRegistered"],io={"X-SDK-Version":"1.3.5"};function rt(t,e,n){let s=t[e];t[e]=function(o){let i={},r={};n.forEach(l=>{let{data:c,headers:p}=l.call(t,o);Object.assign(i,c),Object.assign(r,p)});let a=o.data;return a&&(()=>{var l;if(l=a,Object.prototype.toString.call(l)!=="[object FormData]")o.data=j(j({},a),i);else for(let c in i)a.append(c,i[c])})(),o.headers=j(j({},o.headers||{}),r),s.call(t,o)}}function at(){let t=Math.random().toString(16).slice(2);return{data:{seqId:t},headers:K(j({},io),{"x-seqid":t})}}var gt=class{constructor(e={}){var n;this.config=e,this._reqClass=new M.adapter.reqClass({timeout:this.config.timeout,timeoutMsg:`\u8BF7\u6C42\u5728${this.config.timeout/1e3}s\u5185\u672A\u5B8C\u6210\uFF0C\u5DF2\u4E2D\u65AD`,restrictedMethods:["post"]}),this._cache=Ie(this.config.env),this._localCache=(n=this.config.env,Mn[n]),rt(this._reqClass,"post",[at]),rt(this._reqClass,"upload",[at]),rt(this._reqClass,"download",[at])}post(e){return L(this,null,function*(){return yield this._reqClass.post(e)})}upload(e){return L(this,null,function*(){return yield this._reqClass.upload(e)})}download(e){return L(this,null,function*(){return yield this._reqClass.download(e)})}refreshAccessToken(){return L(this,null,function*(){let e,n;this._refreshAccessTokenPromise||(this._refreshAccessTokenPromise=this._refreshAccessToken());try{e=yield this._refreshAccessTokenPromise}catch(s){n=s}if(this._refreshAccessTokenPromise=null,this._shouldRefreshAccessTokenHook=null,n)throw n;return e})}_refreshAccessToken(){return L(this,null,function*(){let{accessTokenKey:e,accessTokenExpireKey:n,refreshTokenKey:s,loginTypeKey:o,anonymousUuidKey:i}=this._cache.keys;this._cache.removeStore(e),this._cache.removeStore(n);let r=this._cache.getStore(s);if(!r)throw new P({message:"\u672A\u767B\u5F55CloudBase"});let a={refresh_token:r},l=yield this.request("auth.fetchAccessTokenWithRefreshToken",a);if(l.data.code){let{code:c}=l.data;if(c==="SIGN_PARAM_INVALID"||c==="REFRESH_TOKEN_EXPIRED"||c==="INVALID_REFRESH_TOKEN"){if(this._cache.getStore(o)===N.ANONYMOUS&&c==="INVALID_REFRESH_TOKEN"){let p=this._cache.getStore(i),h=this._cache.getStore(s),m=yield this.send("auth.signInAnonymously",{anonymous_uuid:p,refresh_token:h});return this.setRefreshToken(m.refresh_token),this._refreshAccessToken()}q(Un),this._cache.removeStore(s)}throw new P({code:l.data.code,message:`\u5237\u65B0access token\u5931\u8D25\uFF1A${l.data.code}`})}if(l.data.access_token)return q(Fn),this._cache.setStore(e,l.data.access_token),this._cache.setStore(n,l.data.access_token_expire+Date.now()),{accessToken:l.data.access_token,accessTokenExpire:l.data.access_token_expire};l.data.refresh_token&&(this._cache.removeStore(s),this._cache.setStore(s,l.data.refresh_token),this._refreshAccessToken())})}getAccessToken(){return L(this,null,function*(){let{accessTokenKey:e,accessTokenExpireKey:n,refreshTokenKey:s}=this._cache.keys;if(!this._cache.getStore(s))throw new P({message:"refresh token\u4E0D\u5B58\u5728\uFF0C\u767B\u5F55\u72B6\u6001\u5F02\u5E38"});let o=this._cache.getStore(e),i=this._cache.getStore(n),r=!0;return this._shouldRefreshAccessTokenHook&&!(yield this._shouldRefreshAccessTokenHook(o,i))&&(r=!1),(!o||!i||i<Date.now())&&r?this.refreshAccessToken():{accessToken:o,accessTokenExpire:i}})}request(e,n,s){return L(this,null,function*(){let o=`x-tcb-trace_${this.config.env}`,i="application/x-www-form-urlencoded",r=j({action:e,env:this.config.env,dataVersion:"2019-08-16"},n);if(Xt.indexOf(e)===-1){let{refreshTokenKey:f}=this._cache.keys;this._cache.getStore(f)&&(r.access_token=(yield this.getAccessToken()).accessToken)}let a;if(e==="storage.uploadFile"){a=new FormData;for(let f in a)a.hasOwnProperty(f)&&a[f]!==void 0&&a.append(f,r[f]);i="multipart/form-data"}else{i="application/json",a={};for(let f in r)r[f]!==void 0&&(a[f]=r[f])}let l={headers:{"content-type":i}};s&&s.onUploadProgress&&(l.onUploadProgress=s.onUploadProgress);let c=this._localCache.getStore(o);c&&(l.headers["X-TCB-Trace"]=c);let{parse:p,inQuery:h,search:m}=n,_={env:this.config.env};p&&(_.parse=!0),h&&(_=j(j({},h),_));let y=function(f,w,v={}){let b=/\?/.test(w),A="";for(let C in v)A===""?!b&&(w+="?"):A+="&",A+=`${C}=${encodeURIComponent(v[C])}`;return/^http(s)?\:\/\//.test(w+=A)?w:`${f}${w}`}(Qs,"//tcb-api.tencentcloudapi.com/web",_);m&&(y+=m);let d=yield this.post(j({url:y,data:a},l)),u=d.header&&d.header["x-tcb-trace"];if(u&&this._localCache.setStore(o,u),Number(d.status)!==200&&Number(d.statusCode)!==200||!d.data)throw new P({code:"NETWORK_ERROR",message:"network request error"});return d})}send(s){return L(this,arguments,function*(e,n={}){let o=yield this.request(e,n,{onUploadProgress:n.onUploadProgress});if(o.data.code==="ACCESS_TOKEN_EXPIRED"&&Xt.indexOf(e)===-1){yield this.refreshAccessToken();let i=yield this.request(e,n,{onUploadProgress:n.onUploadProgress});if(i.data.code)throw new P({code:i.data.code,message:i.data.message});return i.data}if(o.data.code)throw new P({code:o.data.code,message:o.data.message});return o.data})}setRefreshToken(e){let{accessTokenKey:n,accessTokenExpireKey:s,refreshTokenKey:o}=this._cache.keys;this._cache.removeStore(n),this._cache.removeStore(s),this._cache.setStore(o,e)}},Bn={};function Y(t){return Bn[t]}var ge=class{constructor(e){this.config=e,this._cache=Ie(e.env),this._request=Y(e.env)}setRefreshToken(e){let{accessTokenKey:n,accessTokenExpireKey:s,refreshTokenKey:o}=this._cache.keys;this._cache.removeStore(n),this._cache.removeStore(s),this._cache.setStore(o,e)}setAccessToken(e,n){let{accessTokenKey:s,accessTokenExpireKey:o}=this._cache.keys;this._cache.setStore(s,e),this._cache.setStore(o,n)}refreshUserInfo(){return L(this,null,function*(){let{data:e}=yield this._request.send("auth.getUserInfo",{});return this.setLocalUserInfo(e),e})}setLocalUserInfo(e){let{userInfoKey:n}=this._cache.keys;this._cache.setStore(n,e)}},mt=class{constructor(e){if(!e)throw new P({code:"PARAM_ERROR",message:"envId is not defined"});this._envId=e,this._cache=Ie(this._envId),this._request=Y(this._envId),this.setUserInfo()}linkWithTicket(e){if(typeof e!="string")throw new P({code:"PARAM_ERROR",message:"ticket must be string"});return this._request.send("auth.linkWithTicket",{ticket:e})}linkWithRedirect(e){e.signInWithRedirect()}updatePassword(e,n){return this._request.send("auth.updatePassword",{oldPassword:n,newPassword:e})}updateEmail(e){return this._request.send("auth.updateEmail",{newEmail:e})}updateUsername(e){if(typeof e!="string")throw new P({code:"PARAM_ERROR",message:"username must be a string"});return this._request.send("auth.updateUsername",{username:e})}getLinkedUidList(){return L(this,null,function*(){let{data:e}=yield this._request.send("auth.getLinkedUidList",{}),n=!1,{users:s}=e;return s.forEach(o=>{o.wxOpenId&&o.wxPublicId&&(n=!0)}),{users:s,hasPrimaryUid:n}})}setPrimaryUid(e){return this._request.send("auth.setPrimaryUid",{uid:e})}unlink(e){return this._request.send("auth.unlink",{platform:e})}update(e){return L(this,null,function*(){let{nickName:n,gender:s,avatarUrl:o,province:i,country:r,city:a}=e,{data:l}=yield this._request.send("auth.updateUserInfo",{nickName:n,gender:s,avatarUrl:o,province:i,country:r,city:a});this.setLocalUserInfo(l)})}refresh(){return L(this,null,function*(){let{data:e}=yield this._request.send("auth.getUserInfo",{});return this.setLocalUserInfo(e),e})}setUserInfo(){let{userInfoKey:e}=this._cache.keys,n=this._cache.getStore(e);["uid","loginType","openid","wxOpenId","wxPublicId","unionId","qqMiniOpenId","email","hasPassword","customUserId","nickName","gender","avatarUrl"].forEach(s=>{this[s]=n[s]}),this.location={country:n.country,province:n.province,city:n.city}}setLocalUserInfo(e){let{userInfoKey:n}=this._cache.keys;this._cache.setStore(n,e),this.setUserInfo()}},ce=class{constructor(e){if(!e)throw new P({code:"PARAM_ERROR",message:"envId is not defined"});this._cache=Ie(e);let{refreshTokenKey:n,accessTokenKey:s,accessTokenExpireKey:o}=this._cache.keys,i=this._cache.getStore(n),r=this._cache.getStore(s),a=this._cache.getStore(o);this.credential={refreshToken:i,accessToken:r,accessTokenExpire:a},this.user=new mt(e)}get isAnonymousAuth(){return this.loginType===N.ANONYMOUS}get isCustomAuth(){return this.loginType===N.CUSTOM}get isWeixinAuth(){return this.loginType===N.WECHAT||this.loginType===N.WECHAT_OPEN||this.loginType===N.WECHAT_PUBLIC}get loginType(){return this._cache.getStore(this._cache.keys.loginTypeKey)}},we=class extends ge{signIn(){return L(this,null,function*(){this._cache.updatePersistence("local");let{anonymousUuidKey:e,refreshTokenKey:n}=this._cache.keys,s=this._cache.getStore(e)||void 0,o=this._cache.getStore(n)||void 0,i=yield this._request.send("auth.signInAnonymously",{anonymous_uuid:s,refresh_token:o});if(i.uuid&&i.refresh_token){this._setAnonymousUUID(i.uuid),this.setRefreshToken(i.refresh_token),yield this._request.refreshAccessToken(),q(pe),q(ne,{env:this.config.env,loginType:N.ANONYMOUS,persistence:"local"});let r=new ce(this.config.env);return yield r.user.refresh(),r}throw new P({message:"\u533F\u540D\u767B\u5F55\u5931\u8D25"})})}linkAndRetrieveDataWithTicket(e){return L(this,null,function*(){let{anonymousUuidKey:n,refreshTokenKey:s}=this._cache.keys,o=this._cache.getStore(n),i=this._cache.getStore(s),r=yield this._request.send("auth.linkAndRetrieveDataWithTicket",{anonymous_uuid:o,refresh_token:i,ticket:e});if(r.refresh_token)return this._clearAnonymousUUID(),this.setRefreshToken(r.refresh_token),yield this._request.refreshAccessToken(),q(pt,{env:this.config.env}),q(ne,{loginType:N.CUSTOM,persistence:"local"}),{credential:{refreshToken:r.refresh_token}};throw new P({message:"\u533F\u540D\u8F6C\u5316\u5931\u8D25"})})}_setAnonymousUUID(e){let{anonymousUuidKey:n,loginTypeKey:s}=this._cache.keys;this._cache.removeStore(n),this._cache.setStore(n,e),this._cache.setStore(s,N.ANONYMOUS)}_clearAnonymousUUID(){this._cache.removeStore(this._cache.keys.anonymousUuidKey)}},ze=class extends ge{signIn(e){return L(this,null,function*(){if(typeof e!="string")throw new P({code:"PARAM_ERROR",message:"ticket must be a string"});let{refreshTokenKey:n}=this._cache.keys,s=yield this._request.send("auth.signInWithTicket",{ticket:e,refresh_token:this._cache.getStore(n)||""});if(s.refresh_token)return this.setRefreshToken(s.refresh_token),yield this._request.refreshAccessToken(),q(pe),q(ne,{env:this.config.env,loginType:N.CUSTOM,persistence:this.config.persistence}),yield this.refreshUserInfo(),new ce(this.config.env);throw new P({message:"\u81EA\u5B9A\u4E49\u767B\u5F55\u5931\u8D25"})})}},Ke=class extends ge{signIn(e,n){return L(this,null,function*(){if(typeof e!="string")throw new P({code:"PARAM_ERROR",message:"email must be a string"});let{refreshTokenKey:s}=this._cache.keys,o=yield this._request.send("auth.signIn",{loginType:"EMAIL",email:e,password:n,refresh_token:this._cache.getStore(s)||""}),{refresh_token:i,access_token:r,access_token_expire:a}=o;if(i)return this.setRefreshToken(i),r&&a?this.setAccessToken(r,a):yield this._request.refreshAccessToken(),yield this.refreshUserInfo(),q(pe),q(ne,{env:this.config.env,loginType:N.EMAIL,persistence:this.config.persistence}),new ce(this.config.env);throw o.code?new P({code:o.code,message:`\u90AE\u7BB1\u767B\u5F55\u5931\u8D25: ${o.message}`}):new P({message:"\u90AE\u7BB1\u767B\u5F55\u5931\u8D25"})})}activate(e){return L(this,null,function*(){return this._request.send("auth.activateEndUserMail",{token:e})})}resetPasswordWithToken(e,n){return L(this,null,function*(){return this._request.send("auth.resetPasswordWithToken",{token:e,newPassword:n})})}},$e=class extends ge{signIn(e,n){return L(this,null,function*(){if(typeof e!="string")throw new P({code:"PARAM_ERROR",message:"username must be a string"});typeof n!="string"&&(n="",console.warn("password is empty"));let{refreshTokenKey:s}=this._cache.keys,o=yield this._request.send("auth.signIn",{loginType:N.USERNAME,username:e,password:n,refresh_token:this._cache.getStore(s)||""}),{refresh_token:i,access_token_expire:r,access_token:a}=o;if(i)return this.setRefreshToken(i),a&&r?this.setAccessToken(a,r):yield this._request.refreshAccessToken(),yield this.refreshUserInfo(),q(pe),q(ne,{env:this.config.env,loginType:N.USERNAME,persistence:this.config.persistence}),new ce(this.config.env);throw o.code?new P({code:o.code,message:`\u7528\u6237\u540D\u5BC6\u7801\u767B\u5F55\u5931\u8D25: ${o.message}`}):new P({message:"\u7528\u6237\u540D\u5BC6\u7801\u767B\u5F55\u5931\u8D25"})})}},yt=class{constructor(e){this.config=e,this._cache=Ie(e.env),this._request=Y(e.env),this._onAnonymousConverted=this._onAnonymousConverted.bind(this),this._onLoginTypeChanged=this._onLoginTypeChanged.bind(this),ee(ne,this._onLoginTypeChanged)}get currentUser(){let e=this.hasLoginState();return e&&e.user||null}get loginType(){return this._cache.getStore(this._cache.keys.loginTypeKey)}anonymousAuthProvider(){return new we(this.config)}customAuthProvider(){return new ze(this.config)}emailAuthProvider(){return new Ke(this.config)}usernameAuthProvider(){return new $e(this.config)}signInAnonymously(){return L(this,null,function*(){return new we(this.config).signIn()})}signInWithEmailAndPassword(e,n){return L(this,null,function*(){return new Ke(this.config).signIn(e,n)})}signInWithUsernameAndPassword(e,n){return new $e(this.config).signIn(e,n)}linkAndRetrieveDataWithTicket(e){return L(this,null,function*(){return this._anonymousAuthProvider||(this._anonymousAuthProvider=new we(this.config)),ee(pt,this._onAnonymousConverted),yield this._anonymousAuthProvider.linkAndRetrieveDataWithTicket(e)})}signOut(){return L(this,null,function*(){if(this.loginType===N.ANONYMOUS)throw new P({message:"\u533F\u540D\u7528\u6237\u4E0D\u652F\u6301\u767B\u51FA\u64CD\u4F5C"});let{refreshTokenKey:e,accessTokenKey:n,accessTokenExpireKey:s}=this._cache.keys,o=this._cache.getStore(e);if(!o)return;let i=yield this._request.send("auth.logout",{refresh_token:o});return this._cache.removeStore(e),this._cache.removeStore(n),this._cache.removeStore(s),q(pe),q(ne,{env:this.config.env,loginType:N.NULL,persistence:this.config.persistence}),i})}signUpWithEmailAndPassword(e,n){return L(this,null,function*(){return this._request.send("auth.signUpWithEmailAndPassword",{email:e,password:n})})}sendPasswordResetEmail(e){return L(this,null,function*(){return this._request.send("auth.sendPasswordResetEmail",{email:e})})}onLoginStateChanged(e){ee(pe,()=>{let s=this.hasLoginState();e.call(this,s)});let n=this.hasLoginState();e.call(this,n)}onLoginStateExpired(e){ee(Un,e.bind(this))}onAccessTokenRefreshed(e){ee(Fn,e.bind(this))}onAnonymousConverted(e){ee(pt,e.bind(this))}onLoginTypeChanged(e){ee(ne,()=>{let n=this.hasLoginState();e.call(this,n)})}getAccessToken(){return L(this,null,function*(){return{accessToken:(yield this._request.getAccessToken()).accessToken,env:this.config.env}})}hasLoginState(){let{refreshTokenKey:e}=this._cache.keys;return this._cache.getStore(e)?new ce(this.config.env):null}isUsernameRegistered(e){return L(this,null,function*(){if(typeof e!="string")throw new P({code:"PARAM_ERROR",message:"username must be a string"});let{data:n}=yield this._request.send("auth.isUsernameRegistered",{username:e});return n&&n.isRegistered})}getLoginState(){return Promise.resolve(this.hasLoginState())}signInWithTicket(e){return L(this,null,function*(){return new ze(this.config).signIn(e)})}shouldRefreshAccessToken(e){this._request._shouldRefreshAccessTokenHook=e.bind(this)}getUserInfo(){return this._request.send("auth.getUserInfo",{}).then(e=>e.code?e:K(j({},e.data),{requestId:e.seqId}))}getAuthHeader(){let{refreshTokenKey:e,accessTokenKey:n}=this._cache.keys,s=this._cache.getStore(e);return{"x-cloudbase-credentials":this._cache.getStore(n)+"/@@/"+s}}_onAnonymousConverted(e){let{env:n}=e.data;n===this.config.env&&this._cache.updatePersistence(this.config.persistence)}_onLoginTypeChanged(e){let{loginType:n,persistence:s,env:o}=e.data;o===this.config.env&&(this._cache.updatePersistence(s),this._cache.setStore(this._cache.keys.loginTypeKey,n))}},ro=function(t,e){e=e||Te();let n=Y(this.config.env),{cloudPath:s,filePath:o,onUploadProgress:i,fileType:r="image"}=t;return n.send("storage.getUploadMetadata",{path:s}).then(a=>{let{data:{url:l,authorization:c,token:p,fileId:h,cosFileId:m},requestId:_}=a,y={key:s,signature:c,"x-cos-meta-fileid":m,success_action_status:"201","x-cos-security-token":p};n.upload({url:l,data:y,file:o,name:s,fileType:r,onUploadProgress:i}).then(d=>{d.statusCode===201?e(null,{fileID:h,requestId:_}):e(new P({code:"STORAGE_REQUEST_FAIL",message:`STORAGE_REQUEST_FAIL: ${d.data}`}))}).catch(d=>{e(d)})}).catch(a=>{e(a)}),e.promise},ao=function(t,e){e=e||Te();let n=Y(this.config.env),{cloudPath:s}=t;return n.send("storage.getUploadMetadata",{path:s}).then(o=>{e(null,o)}).catch(o=>{e(o)}),e.promise},co=function({fileList:t},e){if(e=e||Te(),!t||!Array.isArray(t))return{code:"INVALID_PARAM",message:"fileList\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u6570\u7EC4"};for(let s of t)if(!s||typeof s!="string")return{code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u5B57\u7B26\u4E32"};let n={fileid_list:t};return Y(this.config.env).send("storage.batchDeleteFile",n).then(s=>{s.code?e(null,s):e(null,{fileList:s.data.delete_list,requestId:s.requestId})}).catch(s=>{e(s)}),e.promise},qn=function({fileList:t},e){e=e||Te(),t&&Array.isArray(t)||e(null,{code:"INVALID_PARAM",message:"fileList\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u6570\u7EC4"});let n=[];for(let o of t)typeof o=="object"?(o.hasOwnProperty("fileID")&&o.hasOwnProperty("maxAge")||e(null,{code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u5305\u542BfileID\u548CmaxAge\u7684\u5BF9\u8C61"}),n.push({fileid:o.fileID,max_age:o.maxAge})):typeof o=="string"?n.push({fileid:o}):e(null,{code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u5B57\u7B26\u4E32"});let s={file_list:n};return Y(this.config.env).send("storage.batchGetDownloadUrl",s).then(o=>{o.code?e(null,o):e(null,{fileList:o.data.download_list,requestId:o.requestId})}).catch(o=>{e(o)}),e.promise},lo=function(n,s){return L(this,arguments,function*({fileID:t},e){let o=(yield qn.call(this,{fileList:[{fileID:t,maxAge:600}]})).fileList[0];if(o.code!=="SUCCESS")return e?e(o):new Promise(a=>{a(o)});let i=Y(this.config.env),r=o.download_url;if(r=encodeURI(r),!e)return i.download({url:r});e(yield i.download({url:r}))})},uo=function({name:t,data:e,query:n,parse:s,search:o},i){let r=i||Te(),a;try{a=e?JSON.stringify(e):""}catch(c){return Promise.reject(c)}if(!t)return Promise.reject(new P({code:"PARAM_ERROR",message:"\u51FD\u6570\u540D\u4E0D\u80FD\u4E3A\u7A7A"}));let l={inQuery:n,parse:s,search:o,function_name:t,request_data:a};return Y(this.config.env).send("functions.invokeFunction",l).then(c=>{if(c.code)r(null,c);else{let p=c.data.response_data;if(s)r(null,{result:p,requestId:c.requestId});else try{p=JSON.parse(c.data.response_data),r(null,{result:p,requestId:c.requestId})}catch(h){r(new P({message:"response data must be json"}))}}return r.promise}).catch(c=>{r(c)}),r.promise},Zt={timeout:15e3,persistence:"session"},en={},_t=class t{constructor(e){this.config=e||this.config,this.authObj=void 0}init(e){switch(M.adapter||(this.requestClient=new M.adapter.reqClass({timeout:e.timeout||5e3,timeoutMsg:`\u8BF7\u6C42\u5728${(e.timeout||5e3)/1e3}s\u5185\u672A\u5B8C\u6210\uFF0C\u5DF2\u4E2D\u65AD`})),this.config=j(j({},Zt),e),!0){case this.config.timeout>6e5:console.warn("timeout\u5927\u4E8E\u53EF\u914D\u7F6E\u4E0A\u9650[10\u5206\u949F]\uFF0C\u5DF2\u91CD\u7F6E\u4E3A\u4E0A\u9650\u6570\u503C"),this.config.timeout=6e5;break;case this.config.timeout<100:console.warn("timeout\u5C0F\u4E8E\u53EF\u914D\u7F6E\u4E0B\u9650[100ms]\uFF0C\u5DF2\u91CD\u7F6E\u4E3A\u4E0B\u9650\u6570\u503C"),this.config.timeout=100}return new t(this.config)}auth({persistence:e}={}){if(this.authObj)return this.authObj;let n=e||M.adapter.primaryStorage||Zt.persistence;var s;return n!==this.config.persistence&&(this.config.persistence=n),function(o){let{env:i}=o;Nn[i]=new Be(o),Mn[i]=new Be(K(j({},o),{persistence:"local"}))}(this.config),s=this.config,Bn[s.env]=new gt(s),this.authObj=new yt(this.config),this.authObj}on(e,n){return ee.apply(this,[e,n])}off(e,n){return oo.apply(this,[e,n])}callFunction(e,n){return uo.apply(this,[e,n])}deleteFile(e,n){return co.apply(this,[e,n])}getTempFileURL(e,n){return qn.apply(this,[e,n])}downloadFile(e,n){return lo.apply(this,[e,n])}uploadFile(e,n){return ro.apply(this,[e,n])}getUploadMetadata(e,n){return ao.apply(this,[e,n])}registerExtension(e){en[e.name]=e}invokeExtension(e,n){return L(this,null,function*(){let s=en[e];if(!s)throw new P({message:`\u6269\u5C55${e} \u5FC5\u987B\u5148\u6CE8\u518C`});return yield s.invoke(n,this)})}useAdapters(e){let{adapter:n,runtime:s}=no(e)||{};n&&(M.adapter=n),s&&(M.runtime=s)}},zn=new _t;function tn(t,e,n){n===void 0&&(n={});var s=/\?/.test(e),o="";for(var i in n)o===""?!s&&(e+="?"):o+="&",o+=i+"="+encodeURIComponent(n[i]);return/^http(s)?:\/\//.test(e+=o)?e:""+t+e}var wt=class{post(e){let{url:n,data:s,headers:o}=e;return new Promise((i,r)=>{B.request({url:tn("https:",n),data:s,method:"POST",header:o,success(a){i(a)},fail(a){r(a)}})})}upload(e){return new Promise((n,s)=>{let{url:o,file:i,data:r,headers:a,fileType:l}=e,c=B.uploadFile({url:tn("https:",o),name:"file",formData:Object.assign({},r),filePath:i,fileType:l,header:a,success(p){let h={statusCode:p.statusCode,data:p.data||{}};p.statusCode===200&&r.success_action_status&&(h.statusCode=parseInt(r.success_action_status,10)),n(h)},fail(p){s(new Error(p.errMsg||"uploadFile:fail"))}});typeof e.onUploadProgress=="function"&&c&&typeof c.onProgressUpdate=="function"&&c.onProgressUpdate(p=>{e.onUploadProgress({loaded:p.totalBytesSent,total:p.totalBytesExpectedToSend})})})}},ho={setItem(t,e){B.setStorageSync(t,e)},getItem:t=>B.getStorageSync(t),removeItem(t){B.removeStorageSync(t)},clear(){B.clearStorageSync()}},fo={genAdapter:function(){return{root:{},reqClass:wt,localStorage:ho,primaryStorage:"local"}},isMatch:function(){return!0},runtime:"uni_app"};zn.useAdapters(fo);var Ct=zn,po=Ct.init;Ct.init=function(t){t.env=t.spaceId;let e=po.call(this,t);e.config.provider="tencent",e.config.spaceId=t.spaceId;let n=e.auth;return e.auth=function(s){let o=n.call(this,s);return["linkAndRetrieveDataWithTicket","signInAnonymously","signOut","getAccessToken","getLoginState","signInWithTicket","getUserInfo"].forEach(i=>{var r;o[i]=(r=o[i],function(a){a=a||{};let{success:l,fail:c,complete:p}=Ln(a);if(!(l||c||p))return r.call(this,a);r.call(this,a).then(h=>{l&&l(h),p&&p(h)},h=>{c&&c(h),p&&p(h)})}).bind(o)}),o},e.customAuth=e.auth,e};var nn=Ct,go=class extends Dn{getAccessToken(){return new Promise((t,e)=>{let n="Anonymous_Access_token";this.setAccessToken(n),t(n)})}setupRequest(t,e){let n=Object.assign({},t,{spaceId:this.config.spaceId,timestamp:Date.now()}),s={"Content-Type":"application/json"};e!=="auth"&&(n.token=this.accessToken,s["x-basement-token"]=this.accessToken),s["x-serverless-sign"]=ye.sign(n,this.config.clientSecret);let o=jn();s["x-client-info"]=encodeURIComponent(JSON.stringify(o));let{token:i}=We();return s["x-client-token"]=i,{url:this.config.requestUrl,method:"POST",data:n,dataType:"json",header:JSON.parse(JSON.stringify(s))}}uploadFileToOSS({url:t,formData:e,name:n,filePath:s,fileType:o,onUploadProgress:i}){return new Promise((r,a)=>{let l=this.adapter.uploadFile({url:t,formData:e,name:n,filePath:s,fileType:o,success(c){c&&c.statusCode<400?r(c):a(new P({code:"UPLOAD_FAILED",message:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))},fail(c){a(new P({code:c.code||"UPLOAD_FAILED",message:c.message||c.errMsg||"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))}});typeof i=="function"&&l&&typeof l.onProgressUpdate=="function"&&l.onProgressUpdate(c=>{i({loaded:c.totalBytesSent,total:c.totalBytesExpectedToSend})})})}uploadFile({filePath:t,cloudPath:e,fileType:n="image",onUploadProgress:s}){if(!e)throw new P({code:"CLOUDPATH_REQUIRED",message:"cloudPath\u4E0D\u53EF\u4E3A\u7A7A"});let o;return this.getOSSUploadOptionsFromPath({cloudPath:e}).then(i=>{let{url:r,formData:a,name:l}=i.result;o=i.result.fileUrl;let c={url:r,formData:a,name:l,filePath:t,fileType:n};return this.uploadFileToOSS(Object.assign({},c,{onUploadProgress:s}))}).then(()=>this.reportOSSUpload({cloudPath:e})).then(i=>new Promise((r,a)=>{i.success?r({success:!0,filePath:t,fileID:o}):a(new P({code:"UPLOAD_FAILED",message:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))}))}deleteFile({fileList:t}){let e={method:"serverless.file.resource.delete",params:JSON.stringify({fileList:t})};return this.request(this.setupRequest(e)).then(n=>{if(n.success)return n.result;throw new P({code:"DELETE_FILE_FAILED",message:"\u5220\u9664\u6587\u4EF6\u5931\u8D25"})})}getTempFileURL({fileList:t,maxAge:e}={}){if(!Array.isArray(t)||t.length===0)throw new P({code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u5B57\u7B26\u4E32"});let n={method:"serverless.file.resource.getTempFileURL",params:JSON.stringify({fileList:t,maxAge:e})};return this.request(this.setupRequest(n)).then(s=>{if(s.success)return{fileList:s.result.fileList.map(o=>({fileID:o.fileID,tempFileURL:o.tempFileURL}))};throw new P({code:"GET_TEMP_FILE_URL_FAILED",message:"\u83B7\u53D6\u4E34\u65F6\u6587\u4EF6\u94FE\u63A5\u5931\u8D25"})})}},mo={init(t){let e=new go(t),n={signInAnonymously:function(){return e.authorize()},getLoginState:function(){return Promise.resolve(!1)}};return e.auth=function(){return n},e.customAuth=e.auth,e}},ct=Q(function(t,e){t.exports=te.enc.Hex});function Kn(t="",e={}){let{data:n,functionName:s,method:o,headers:i,signHeaderKeys:r=[],config:a}=e,l=Date.now(),c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(d){var u=16*Math.random()|0;return(d==="x"?u:3&u|8).toString(16)}),p=Object.assign({},i,{"x-from-app-id":a.spaceAppId,"x-from-env-id":a.spaceId,"x-to-env-id":a.spaceId,"x-from-instance-id":l,"x-from-function-name":s,"x-client-timestamp":l,"x-alipay-source":"client","x-request-id":c,"x-alipay-callid":c,"x-trace-id":c}),h=["x-from-app-id","x-from-env-id","x-to-env-id","x-from-instance-id","x-from-function-name","x-client-timestamp"].concat(r),[m="",_=""]=t.split("?")||[],y=function(d){let u=d.signedHeaders.join(";"),f=d.signedHeaders.map(O=>`${O.toLowerCase()}:${d.headers[O]}
`).join(""),w=Gt(d.body).toString(ct),v=`${d.method.toUpperCase()}
${d.path}
${d.query}
${f}
${u}
${w}
`,b=Gt(v).toString(ct),A=`HMAC-SHA256
${d.timestamp}
${b}
`,C=Zs(A,d.secretKey).toString(ct);return`HMAC-SHA256 Credential=${d.secretId}, SignedHeaders=${u}, Signature=${C}`}({path:m,query:_,method:o,headers:p,timestamp:l,body:JSON.stringify(n),secretId:a.accessKey,secretKey:a.secretKey,signedHeaders:h.sort()});return{url:`${a.endpoint}${t}`,headers:Object.assign({},p,{Authorization:y})}}function $n({url:t,data:e,method:n="POST",headers:s={}}){return new Promise((o,i)=>{B.request({url:t,method:n,data:e,header:s,dataType:"json",complete:(r={})=>{let a=s["x-trace-id"]||"";if(!r.statusCode||r.statusCode>=400){let{message:l,errMsg:c,trace_id:p}=r.data||{};return i(new P({code:"SYS_ERR",message:l||c||"request:fail",requestId:p||a}))}o({status:r.statusCode,data:r.data,headers:r.header,requestId:a})}})})}function sn(t,e){let{path:n,data:s,method:o="GET"}=t,{url:i,headers:r}=Kn(n,{functionName:"",data:s,method:o,headers:{"x-alipay-cloud-mode":"oss","x-data-api-type":"oss","x-expire-timestamp":Date.now()+6e4},signHeaderKeys:["x-data-api-type","x-expire-timestamp"],config:e});return $n({url:i,data:s,method:o,headers:r}).then(a=>{let l=a.data||{};if(!l.success)throw new P({code:a.errCode,message:a.errMsg,requestId:a.requestId});return l.data||{}}).catch(a=>{throw new P({code:a.errCode,message:a.errMsg,requestId:a.requestId})})}function yo(t=""){let e=t.trim().replace(/^cloud:\/\//,""),n=e.indexOf("/");if(n<=0)throw new P({code:"INVALID_PARAM",message:"fileID\u4E0D\u5408\u6CD5"});let s=e.substring(0,n),o=e.substring(n+1);return s!==this.config.spaceId&&console.warn("file ".concat(t," does not belong to env ").concat(this.config.spaceId)),o}function _o(t=""){return"cloud://".concat(this.config.spaceId,"/").concat(t.replace(/^\/+/,""))}var wo=class{constructor(t){if(["spaceId","spaceAppId","accessKey","secretKey"].forEach(e=>{if(!Object.prototype.hasOwnProperty.call(t,e))throw new Error(`${e} required`)}),t.endpoint){if(typeof t.endpoint!="string")throw new Error("endpoint must be string");if(!/^https:\/\//.test(t.endpoint))throw new Error("endpoint must start with https://");t.endpoint=t.endpoint.replace(/\/$/,"")}this.config=Object.assign({},t,{endpoint:t.endpoint||`https://${t.spaceId}.api-hz.cloudbasefunction.cn`})}callFunction(t){return function(e,n){let{name:s,data:o}=e,i="POST",{url:r,headers:a}=Kn("/functions/invokeFunction",{functionName:s,data:o,method:i,headers:{"x-to-function-name":s},signHeaderKeys:["x-to-function-name"],config:n});return $n({url:r,data:o,method:i,headers:a}).then(l=>({errCode:0,success:!0,requestId:l.requestId,result:l.data})).catch(l=>{throw new P({code:l.errCode,message:l.errMsg,requestId:l.requestId})})}(t,this.config)}uploadFileToOSS({url:t,filePath:e,fileType:n,formData:s,onUploadProgress:o}){return new Promise((i,r)=>{let a=B.uploadFile({url:t,filePath:e,fileType:n,formData:s,name:"file",success(l){l&&l.statusCode<400?i(l):r(new P({code:"UPLOAD_FAILED",message:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))},fail(l){r(new P({code:l.code||"UPLOAD_FAILED",message:l.message||l.errMsg||"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))}});typeof o=="function"&&a&&typeof a.onProgressUpdate=="function"&&a.onProgressUpdate(l=>{o({loaded:l.totalBytesSent,total:l.totalBytesExpectedToSend})})})}uploadFile(o){return L(this,arguments,function*({filePath:t,cloudPath:e="",fileType:n="image",onUploadProgress:s}){if(be(e)!=="string")throw new P({code:"INVALID_PARAM",message:"cloudPath\u5FC5\u987B\u4E3A\u5B57\u7B26\u4E32\u7C7B\u578B"});if(!(e=e.trim()))throw new P({code:"INVALID_PARAM",message:"cloudPath\u4E0D\u53EF\u4E3A\u7A7A"});if(/:\/\//.test(e))throw new P({code:"INVALID_PARAM",message:"cloudPath\u4E0D\u5408\u6CD5"});let i=yield sn({path:"/".concat(e.replace(/^\//,""),"?post_url")},this.config),{file_id:r,upload_url:a,form_data:l}=i,c=l&&l.reduce((p,h)=>(p[h.key]=h.value,p),{});return this.uploadFileToOSS({url:a,filePath:t,fileType:n,formData:c,onUploadProgress:s}).then(()=>({fileID:r}))})}getTempFileURL(e){return L(this,arguments,function*({fileList:t}){return new Promise((n,s)=>{(!t||t.length<0)&&s(new P({errCode:"INVALID_PARAM",errMsg:"fileList\u4E0D\u80FD\u4E3A\u7A7A\u6570\u7EC4"})),t.length>50&&s(new P({errCode:"INVALID_PARAM",errMsg:"fileList\u6570\u7EC4\u957F\u5EA6\u4E0D\u80FD\u8D85\u8FC750"}));let o=[];for(let i of t){be(i)!=="string"&&s(new P({errCode:"INVALID_PARAM",errMsg:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u5B57\u7B26\u4E32"}));let r=yo.call(this,i);o.push({file_id:r,expire:600})}sn({path:"/?download_url",data:{file_list:o},method:"POST"},this.config).then(i=>{let{file_list:r=[]}=i;n({fileList:r.map(a=>({fileID:_o.call(this,a.file_id),tempFileURL:a.download_url}))})}).catch(i=>s(i))})})}},bo={init:t=>{t.provider="alipay";let e=new wo(t);return e.auth=function(){return{signInAnonymously:function(){return Promise.resolve()},getLoginState:function(){return Promise.resolve(!0)}}},e}};function vo({data:t}){let e;e=jn();let n=JSON.parse(JSON.stringify(t||{}));if(Object.assign(n,{clientInfo:e}),!n.uniIdToken){let{token:s}=We();s&&(n.uniIdToken=s)}return n}var So=[{rule:/fc_function_not_found|FUNCTION_NOT_FOUND/,content:"\uFF0C\u4E91\u51FD\u6570[{functionName}]\u5728\u4E91\u7AEF\u4E0D\u5B58\u5728\uFF0C\u8BF7\u68C0\u67E5\u6B64\u4E91\u51FD\u6570\u540D\u79F0\u662F\u5426\u6B63\u786E\u4EE5\u53CA\u8BE5\u4E91\u51FD\u6570\u662F\u5426\u5DF2\u4E0A\u4F20\u5230\u670D\u52A1\u7A7A\u95F4",mode:"append"}],Hn=/[\\^$.*+?()[\]{}|]/g,ko=RegExp(Hn.source);function on(t,e,n){return t.replace(new RegExp((s=e)&&ko.test(s)?s.replace(Hn,"\\$&"):s,"g"),n);var s}var xo="request",To="response",Io="both",Ao={code:2e4,message:"System error"},Po={code:20101,message:"Invalid client"};function Vn(t){let{errSubject:e,subject:n,errCode:s,errMsg:o,code:i,message:r,cause:a}=t||{};return new P({subject:e||n||"uni-secure-network",code:s||i||Ao.code,message:o||r,cause:a})}var bt;function rn({secretType:t}={}){return t===xo||t===To||t===Io}function an({name:t,data:e={}}={}){return t==="DCloud-clientDB"&&e.redirectTo==="encryption"&&e.action==="getAppClientKey"}function Co({provider:t,spaceId:e,functionName:n}={}){let{appId:s,uniPlatform:o,osName:i}=Rn(),r=o;o==="app"&&(r=i);let a=function({provider:h,spaceId:m}={}){let _=Ks;if(!_)return{};h=function(d){return d==="tencent"?"tcb":d}(h);let y=_.find(d=>d.provider===h&&d.spaceId===m);return y&&y.config}({provider:t,spaceId:e});if(!a||!a.accessControl||!a.accessControl.enable)return!1;let l=a.accessControl.function||{},c=Object.keys(l);if(c.length===0)return!0;let p=function(h,m){let _,y,d;for(let u=0;u<h.length;u++){let f=h[u];f!==m?f!=="*"?f.split(",").map(w=>w.trim()).indexOf(m)>-1&&(y=f):d=f:_=f}return _||y||d}(c,n);if(!p)return!1;if((l[p]||[]).find((h={})=>h.appId===s&&(h.platform||"").toLowerCase()===r.toLowerCase()))return!0;throw console.error(`\u6B64\u5E94\u7528[appId: ${s}, platform: ${r}]\u4E0D\u5728\u4E91\u7AEF\u914D\u7F6E\u7684\u5141\u8BB8\u8BBF\u95EE\u7684\u5E94\u7528\u5217\u8868\u5185\uFF0C\u53C2\u8003\uFF1Ahttps://uniapp.dcloud.net.cn/uniCloud/secure-network.html#verify-client`),Vn(Po)}function cn({functionName:t,result:e,logPvd:n}){}function Lo(t){let e=t.callFunction,n=function(s){let o=s.name;s.data=vo.call(t,{data:s.data});let i={aliyun:"aliyun",tencent:"tcb",tcb:"tcb",alipay:"alipay"}[this.config.provider],r=rn(s),a=an(s),l=r||a;return e.call(this,s).then(c=>(c.errCode=0,!l&&cn.call(this,{functionName:o,result:c,logPvd:i}),Promise.resolve(c)),c=>(!l&&cn.call(this,{functionName:o,result:c,logPvd:i}),c&&c.message&&(c.message=function({message:p="",extraInfo:h={},formatter:m=[]}={}){for(let _=0;_<m.length;_++){let{rule:y,content:d,mode:u}=m[_],f=p.match(y);if(!f)continue;let w=d;for(let v=1;v<f.length;v++)w=on(w,`{$${v}}`,f[v]);for(let v in h)w=on(w,`{${v}}`,h[v]);return u==="replace"?w:p+w}return p}({message:`[${s.name}]: ${c.message}`,formatter:So,extraInfo:{functionName:o}})),Promise.reject(c)))};t.callFunction=function(s){let{provider:o,spaceId:i}=t.config,r=s.name,a,l;return s.data=s.data||{},a=n,a=a.bind(t),an(s)?l=n.call(t,s):rn(s)?l=new bt({secretType:s.secretType,uniCloudIns:t}).wrapEncryptDataCallFunction(n.bind(t))(s):Co({provider:o,spaceId:i,functionName:r})?l=new bt({secretType:s.secretType,uniCloudIns:t}).wrapVerifyClientCallFunction(n.bind(t))(s):l=a(s),Object.defineProperty(l,"result",{get:()=>(console.warn("\u5F53\u524D\u8FD4\u56DE\u7ED3\u679C\u4E3APromise\u7C7B\u578B\uFF0C\u4E0D\u53EF\u76F4\u63A5\u8BBF\u95EE\u5176result\u5C5E\u6027\uFF0C\u8BE6\u60C5\u8BF7\u53C2\u8003\uFF1Ahttps://uniapp.dcloud.net.cn/uniCloud/faq?id=promise"),{})}),l.then(c=>(typeof UTSJSONObject!="undefined"&&(c.result=new UTSJSONObject(c.result)),c))}}bt=class{constructor(){throw Vn({message:`Platform ${In} is not enabled, please check whether secure network module is enabled in your manifest.json`})}};var Wn=Symbol("CLIENT_DB_INTERNAL");function He(t,e){return t.then="DoNotReturnProxyWithAFunctionNamedThen",t._internalType=Wn,t.inspect=null,t.__v_raw=void 0,new Proxy(t,{get(n,s,o){if(s==="_uniClient")return null;if(typeof s=="symbol")return n[s];if(s in n||typeof s!="string"){let i=n[s];return typeof i=="function"?i.bind(n):i}return e.get(n,s,o)}})}function ln(t){return{on:(e,n)=>{t[e]=t[e]||[],t[e].indexOf(n)>-1||t[e].push(n)},off:(e,n)=>{t[e]=t[e]||[];let s=t[e].indexOf(n);s!==-1&&t[e].splice(s,1)}}}var Oo=["db.Geo","db.command","command.aggregate"];function Jn(t,e){return Oo.indexOf(`${t}.${e}`)>-1}function ae(t){switch(be(t=On(t))){case"array":return t.map(e=>ae(e));case"object":return t._internalType===Wn||Object.keys(t).forEach(e=>{t[e]=ae(t[e])}),t;case"regexp":return{$regexp:{source:t.source,flags:t.flags}};case"date":return{$date:t.toISOString()};default:return t}}function me(t){return t&&t.content&&t.content.$method}var vt=class{constructor(e,n,s){this.content=e,this.prevStage=n||null,this.udb=null,this._database=s}toJSON(){let e=this,n=[e.content];for(;e.prevStage;)e=e.prevStage,n.push(e.content);return{$db:n.reverse().map(s=>({$method:s.$method,$param:ae(s.$param)}))}}toString(){return JSON.stringify(this.toJSON())}getAction(){let e=this.toJSON().$db.find(n=>n.$method==="action");return e&&e.$param&&e.$param[0]}getCommand(){return{$db:this.toJSON().$db.filter(e=>e.$method!=="action")}}get isAggregate(){let e=this;for(;e;){let n=me(e),s=me(e.prevStage);if(n==="aggregate"&&s==="collection"||n==="pipeline")return!0;e=e.prevStage}return!1}get isCommand(){let e=this;for(;e;){if(me(e)==="command")return!0;e=e.prevStage}return!1}get isAggregateCommand(){let e=this;for(;e;){let n=me(e),s=me(e.prevStage);if(n==="aggregate"&&s==="command")return!0;e=e.prevStage}return!1}getNextStageFn(e){let n=this;return function(){return ve({$method:e,$param:ae(Array.from(arguments))},n,n._database)}}get count(){return this.isAggregate?this.getNextStageFn("count"):function(){return this._send("count",Array.from(arguments))}}get remove(){return this.isCommand?this.getNextStageFn("remove"):function(){return this._send("remove",Array.from(arguments))}}get(){return this._send("get",Array.from(arguments))}get add(){return this.isCommand?this.getNextStageFn("add"):function(){return this._send("add",Array.from(arguments))}}update(){return this._send("update",Array.from(arguments))}end(){return this._send("end",Array.from(arguments))}get set(){return this.isCommand?this.getNextStageFn("set"):function(){throw new Error("JQL\u7981\u6B62\u4F7F\u7528set\u65B9\u6CD5")}}_send(e,n){let s=this.getAction(),o=this.getCommand();return o.$db.push({$method:e,$param:ae(n)}),this._database._callCloudFunction({action:s,command:o})}};function ve(t,e,n){return He(new vt(t,e,n),{get(s,o){let i="db";return s&&s.content&&(i=s.content.$method),Jn(i,o)?ve({$method:o},s,n):function(){return ve({$method:o,$param:ae(Array.from(arguments))},s,n)}}})}function lt({path:t,method:e}){return class{constructor(){this.param=Array.from(arguments)}toJSON(){return{$newDb:[...t.map(n=>({$method:n})),{$method:e,$param:this.param}]}}toString(){return JSON.stringify(this.toJSON())}}}function un(t,e={}){return He(new t(e),{get:(n,s)=>Jn("db",s)?ve({$method:s},null,n):function(){return ve({$method:s,$param:ae(Array.from(arguments))},null,n)}})}var Ve=class extends class{constructor({uniClient:e={},isJQL:n=!1}={}){this._uniClient=e,this._authCallBacks={},this._dbCallBacks={},e._isDefault&&(this._dbCallBacks=he("_globalUniCloudDatabaseCallback")),n||(this.auth=ln(this._authCallBacks)),this._isJQL=n,Object.assign(this,ln(this._dbCallBacks)),this.env=He({},{get:(s,o)=>({$env:o})}),this.Geo=He({},{get:(s,o)=>lt({path:["Geo"],method:o})}),this.serverDate=lt({path:[],method:"serverDate"}),this.RegExp=lt({path:[],method:"RegExp"})}getCloudEnv(e){if(typeof e!="string"||!e.trim())throw new Error("getCloudEnv\u53C2\u6570\u9519\u8BEF");return{$env:e.replace("$cloudEnv_","")}}_callback(e,n){let s=this._dbCallBacks;s[e]&&s[e].forEach(o=>{o(...n)})}_callbackAuth(e,n){let s=this._authCallBacks;s[e]&&s[e].forEach(o=>{o(...n)})}multiSend(){let e=Array.from(arguments),n=e.map(s=>{let o=s.getAction(),i=s.getCommand();if(i.$db[i.$db.length-1].$method!=="getTemp")throw new Error("multiSend\u53EA\u652F\u6301\u5B50\u547D\u4EE4\u5185\u4F7F\u7528getTemp");return{action:o,command:i}});return this._callCloudFunction({multiCommand:n,queryList:e})}}{_parseResult(e){return this._isJQL?e.result:e}_callCloudFunction({action:e,command:n,multiCommand:s,queryList:o}){function i(h,m){if(s&&o)for(let _=0;_<o.length;_++){let y=o[_];y.udb&&typeof y.udb.setResult=="function"&&(m?y.udb.setResult(m):y.udb.setResult(h.result.dataList[_]))}}let r=this,a=this._isJQL?"databaseForJQL":"database";function l(h){return r._callback("error",[h]),U(F(a,"fail"),h).then(()=>U(F(a,"complete"),h)).then(()=>(i(null,h),H(G,{type:Vt,content:h}),Promise.reject(h)))}let c=U(F(a,"invoke")),p=this._uniClient;return c.then(()=>p.callFunction({name:"DCloud-clientDB",type:Us,data:{action:e,command:n,multiCommand:s}})).then(h=>{let{code:m,message:_,token:y,tokenExpired:d,systemInfo:u=[]}=h.result;if(u)for(let w=0;w<u.length;w++){let{level:v,message:b,detail:A}=u[w],C=console[v==="warn"?"error":v]||console.log,O="[System Info]"+b;A&&(O=`${O}
\u8BE6\u7EC6\u4FE1\u606F\uFF1A${A}`),C(O)}if(m)return l(new P({code:m,message:_,requestId:h.requestId}));h.result.errCode=h.result.errCode||h.result.code,h.result.errMsg=h.result.errMsg||h.result.message,y&&d&&(En({token:y,tokenExpired:d}),this._callbackAuth("refreshToken",[{token:y,tokenExpired:d}]),this._callback("refreshToken",[{token:y,tokenExpired:d}]),H(Fe,{token:y,tokenExpired:d}));let f=[{prop:"affectedDocs",tips:"affectedDocs\u4E0D\u518D\u63A8\u8350\u4F7F\u7528\uFF0C\u8BF7\u4F7F\u7528inserted/deleted/updated/data.length\u66FF\u4EE3"},{prop:"code",tips:"code\u4E0D\u518D\u63A8\u8350\u4F7F\u7528\uFF0C\u8BF7\u4F7F\u7528errCode\u66FF\u4EE3"},{prop:"message",tips:"message\u4E0D\u518D\u63A8\u8350\u4F7F\u7528\uFF0C\u8BF7\u4F7F\u7528errMsg\u66FF\u4EE3"}];for(let w=0;w<f.length;w++){let{prop:v,tips:b}=f[w];if(v in h.result){let A=h.result[v];Object.defineProperty(h.result,v,{get:()=>(console.warn(b),A)})}}return function(w){return U(F(a,"success"),w).then(()=>U(F(a,"complete"),w)).then(()=>{i(w,null);let v=r._parseResult(w);return H(G,{type:Vt,content:v}),Promise.resolve(v)})}(h)},h=>(/fc_function_not_found|FUNCTION_NOT_FOUND/g.test(h.message)&&console.warn("clientDB\u672A\u521D\u59CB\u5316\uFF0C\u8BF7\u5728web\u63A7\u5236\u53F0\u4FDD\u5B58\u4E00\u6B21schema\u4EE5\u5F00\u542FclientDB"),l(new P({code:h.code||"SYSTEM_ERROR",message:h.message,requestId:h.requestId}))))}},re="token\u65E0\u6548\uFF0C\u8DF3\u8F6C\u767B\u5F55\u9875\u9762",Gn="token\u8FC7\u671F\uFF0C\u8DF3\u8F6C\u767B\u5F55\u9875\u9762",Eo={TOKEN_INVALID_TOKEN_EXPIRED:Gn,TOKEN_INVALID_INVALID_CLIENTID:re,TOKEN_INVALID:re,TOKEN_INVALID_WRONG_TOKEN:re,TOKEN_INVALID_ANONYMOUS_USER:re},St={"uni-id-token-expired":Gn,"uni-id-check-token-failed":re,"uni-id-token-not-exist":re,"uni-id-check-device-feature-failed":re};function dn(t,e){let n="";return n=t?`${t}/${e}`:e,n.replace(/^\//,"")}function hn(t=[],e=""){let n=[],s=[];return t.forEach(o=>{o.needLogin===!0?n.push(dn(e,o.path)):o.needLogin===!1&&s.push(dn(e,o.path))}),{needLoginPage:n,notNeedLoginPage:s}}function Se(t){return t.split("?")[0].replace(/^\//,"")}function Lt(){return function(t){let e=t&&t.$page&&t.$page.fullPath||"";return e&&(e.charAt(0)!=="/"&&(e="/"+e),e)}(function(){let t=getCurrentPages();return t[t.length-1]}())}function Qn(){return Se(Lt())}function Ro(t="",e={}){if(!t||!(e&&e.list&&e.list.length))return!1;let n=e.list,s=Se(t);return n.some(o=>o.pagePath===s)}var jo=!!Sn.uniIdRouter,{loginPage:ke,routerNeedLogin:Do,resToLogin:No,needLoginPage:Yn,notNeedLoginPage:Mo,loginPageInTabBar:Uo}=function({pages:t=[],subPackages:e=[],uniIdRouter:n={},tabBar:s={}}=Sn){let{loginPage:o,needLogin:i=[],resToLogin:r=!0}=n,{needLoginPage:a,notNeedLoginPage:l}=hn(t),{needLoginPage:c,notNeedLoginPage:p}=function(h=[]){let m=[],_=[];return h.forEach(y=>{let{root:d,pages:u=[]}=y,{needLoginPage:f,notNeedLoginPage:w}=hn(u,d);m.push(...f),_.push(...w)}),{needLoginPage:m,notNeedLoginPage:_}}(e);return{loginPage:o,routerNeedLogin:i,resToLogin:r,needLoginPage:[...a,...c],notNeedLoginPage:[...l,...p],loginPageInTabBar:Ro(o,s)}}();if(Yn.indexOf(ke)>-1)throw new Error(`Login page [${ke}] should not be "needLogin", please check your pages.json`);function Xn(t){let e=Qn();if(t.charAt(0)==="/")return t;let[n,s]=t.split("?"),o=n.replace(/^\//,"").split("/"),i=e.split("/");i.pop();for(let r=0;r<o.length;r++){let a=o[r];a===".."?i.pop():a!=="."&&i.push(a)}return i[0]===""&&i.shift(),"/"+i.join("/")+(s?"?"+s:"")}function Fo(t){let e=Se(Xn(t));return!(Mo.indexOf(e)>-1)&&(Yn.indexOf(e)>-1||Do.some(n=>function(s,o){return new RegExp(o).test(s)}(t,n)))}function Zn({redirect:t}){let e=Se(t),n=Se(ke);return Qn()!==n&&e!==n}function kt({api:t,redirect:e}={}){if(!e||!Zn({redirect:e}))return;let n=function(o,i){return o.charAt(0)!=="/"&&(o="/"+o),i?o.indexOf("?")>-1?o+`&uniIdRedirectUrl=${encodeURIComponent(i)}`:o+`?uniIdRedirectUrl=${encodeURIComponent(i)}`:o}(ke,e);Uo?t!=="navigateTo"&&t!=="redirectTo"||(t="switchTab"):t==="switchTab"&&(t="navigateTo");let s={navigateTo:uni.navigateTo,redirectTo:uni.redirectTo,switchTab:uni.switchTab,reLaunch:uni.reLaunch};setTimeout(()=>{s[t]({url:n})},0)}function fn({url:t}={}){let e={abortLoginPageJump:!1,autoToLoginPage:!1},n=function(){let{token:s,tokenExpired:o}=We(),i;if(s){if(o<Date.now()){let r="uni-id-token-expired";i={errCode:r,errMsg:St[r]}}}else{let r="uni-id-check-token-failed";i={errCode:r,errMsg:St[r]}}return i}();if(Fo(t)&&n){if(n.uniIdRedirectUrl=t,xe(fe).length>0)return setTimeout(()=>{H(fe,n)},0),e.abortLoginPageJump=!0,e;e.autoToLoginPage=!0}return e}function Bo(){(function(){let e=Lt(),{abortLoginPageJump:n,autoToLoginPage:s}=fn({url:e});n||s&&kt({api:"redirectTo",redirect:e})})();let t=["navigateTo","redirectTo","reLaunch","switchTab"];for(let e=0;e<t.length;e++){let n=t[e];uni.addInterceptor(n,{invoke(s){let{abortLoginPageJump:o,autoToLoginPage:i}=fn({url:s.url});return o?s:i?(kt({api:n,redirect:Xn(s.url)}),!1):s}})}}function qo(){this.onResponse(t=>{let{type:e,content:n}=t,s=!1;switch(e){case"cloudobject":s=function(o){if(typeof o!="object")return!1;let{errCode:i}=o||{};return i in St}(n);break;case"clientdb":s=function(o){if(typeof o!="object")return!1;let{errCode:i}=o||{};return i in Eo}(n)}s&&function(o={}){let i=xe(fe);Cn().then(()=>{let r=Lt();if(r&&Zn({redirect:r}))return i.length>0?H(fe,Object.assign({uniIdRedirectUrl:r},o)):void(ke&&kt({api:"navigateTo",redirect:r}))})}(n)})}function zo(t){(function(e){e.onResponse=function(n){tt(G,n)},e.offResponse=function(n){nt(G,n)}})(t),function(e){e.onNeedLogin=function(n){tt(fe,n)},e.offNeedLogin=function(n){nt(fe,n)},jo&&(he("_globalUniCloudStatus").needLoginInit||(he("_globalUniCloudStatus").needLoginInit=!0,Cn().then(()=>{Bo.call(e)}),No&&qo.call(e)))}(t),function(e){e.onRefreshToken=function(n){tt(Fe,n)},e.offRefreshToken=function(n){nt(Fe,n)}}(t)}var es,je="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Ko=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;function $o(){let t=We().token||"",e=t.split(".");if(!t||e.length!==3)return{uid:null,role:[],permission:[],tokenExpired:0};let n;try{n=JSON.parse((s=e[1],decodeURIComponent(es(s).split("").map(function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch(o){throw new Error("\u83B7\u53D6\u5F53\u524D\u7528\u6237\u4FE1\u606F\u51FA\u9519\uFF0C\u8BE6\u7EC6\u9519\u8BEF\u4FE1\u606F\u4E3A\uFF1A"+o.message)}var s;return n.tokenExpired=1e3*n.exp,delete n.exp,delete n.iat,n}es=typeof atob!="function"?function(t){if(t=String(t).replace(/[\t\n\f\r ]+/g,""),!Ko.test(t))throw new Error("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");var e;t+="==".slice(2-(3&t.length));for(var n,s,o="",i=0;i<t.length;)e=je.indexOf(t.charAt(i++))<<18|je.indexOf(t.charAt(i++))<<12|(n=je.indexOf(t.charAt(i++)))<<6|(s=je.indexOf(t.charAt(i++))),o+=n===64?String.fromCharCode(e>>16&255):s===64?String.fromCharCode(e>>16&255,e>>8&255):String.fromCharCode(e>>16&255,e>>8&255,255&e);return o}:atob;var Ho=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});let n="chooseAndUploadFile:ok",s="chooseAndUploadFile:fail";function o(r,a){return r.tempFiles.forEach((l,c)=>{l.name||(l.name=l.path.substring(l.path.lastIndexOf("/")+1)),a&&(l.fileType=a),l.cloudPath=Date.now()+"_"+c+l.name.substring(l.name.lastIndexOf("."))}),r.tempFilePaths||(r.tempFilePaths=r.tempFiles.map(l=>l.path)),r}function i(r,a,{onChooseFile:l,onUploadProgress:c}){return a.then(p=>{if(l){let h=l(p);if(h!==void 0)return Promise.resolve(h).then(m=>m===void 0?p:m)}return p}).then(p=>p===!1?{errMsg:n,tempFilePaths:[],tempFiles:[]}:function(h,m,_=5,y){(m=Object.assign({},m)).errMsg=n;let d=m.tempFiles,u=d.length,f=0;return new Promise(w=>{for(;f<_;)v();function v(){let b=f++;if(b>=u)return void(!d.find(C=>!C.url&&!C.errMsg)&&w(m));let A=d[b];h.uploadFile({provider:A.provider,filePath:A.path,cloudPath:A.cloudPath,fileType:A.fileType,cloudPathAsRealPath:A.cloudPathAsRealPath,onUploadProgress(C){C.index=b,C.tempFile=A,C.tempFilePath=A.path,y&&y(C)}}).then(C=>{A.url=C.fileID,b<u&&v()}).catch(C=>{A.errMsg=C.errMsg||C.message,b<u&&v()})}})}(r,p,5,c))}e.initChooseAndUploadFile=function(r){return function(a={type:"all"}){return a.type==="image"?i(r,function(l){let{count:c,sizeType:p,sourceType:h=["album","camera"],extension:m}=l;return new Promise((_,y)=>{uni.chooseImage({count:c,sizeType:p,sourceType:h,extension:m,success(d){_(o(d,"image"))},fail(d){y({errMsg:d.errMsg.replace("chooseImage:fail",s)})}})})}(a),a):a.type==="video"?i(r,function(l){let{camera:c,compressed:p,maxDuration:h,sourceType:m=["album","camera"],extension:_}=l;return new Promise((y,d)=>{uni.chooseVideo({camera:c,compressed:p,maxDuration:h,sourceType:m,extension:_,success(u){let{tempFilePath:f,duration:w,size:v,height:b,width:A}=u;y(o({errMsg:"chooseVideo:ok",tempFilePaths:[f],tempFiles:[{name:u.tempFile&&u.tempFile.name||"",path:f,size:v,type:u.tempFile&&u.tempFile.type||"",width:A,height:b,duration:w,fileType:"video",cloudPath:""}]},"video"))},fail(u){d({errMsg:u.errMsg.replace("chooseVideo:fail",s)})}})})}(a),a):i(r,function(l){let{count:c,extension:p}=l;return new Promise((h,m)=>{let _=uni.chooseFile;if(typeof wx!="undefined"&&typeof wx.chooseMessageFile=="function"&&(_=wx.chooseMessageFile),typeof _!="function")return m({errMsg:s+" \u8BF7\u6307\u5B9A type \u7C7B\u578B\uFF0C\u8BE5\u5E73\u53F0\u4EC5\u652F\u6301\u9009\u62E9 image \u6216 video\u3002"});_({type:"all",count:c,extension:p,success(y){h(o(y))},fail(y){m({errMsg:y.errMsg.replace("chooseFile:fail",s)})}})})}(a),a)}}}),Vo=Es(Ho),Wo="manual";function ts(t){return{props:{localdata:{type:Array,default:()=>[]},options:{type:[Object,Array],default:()=>({})},spaceInfo:{type:Object,default:()=>({})},collection:{type:[String,Array],default:""},action:{type:String,default:""},field:{type:String,default:""},orderby:{type:String,default:""},where:{type:[String,Object],default:""},pageData:{type:String,default:"add"},pageCurrent:{type:Number,default:1},pageSize:{type:Number,default:20},getcount:{type:[Boolean,String],default:!1},gettree:{type:[Boolean,String],default:!1},gettreepath:{type:[Boolean,String],default:!1},startwith:{type:String,default:""},limitlevel:{type:Number,default:10},groupby:{type:String,default:""},groupField:{type:String,default:""},distinct:{type:[Boolean,String],default:!1},foreignKey:{type:String,default:""},loadtime:{type:String,default:"auto"},manual:{type:Boolean,default:!1}},data:()=>({mixinDatacomLoading:!1,mixinDatacomHasMore:!1,mixinDatacomResData:[],mixinDatacomErrorMessage:"",mixinDatacomPage:{},mixinDatacomError:null}),created(){this.mixinDatacomPage={current:this.pageCurrent,size:this.pageSize,count:0},this.$watch(()=>{var e=[];return["pageCurrent","pageSize","localdata","collection","action","field","orderby","where","getont","getcount","gettree","groupby","groupField","distinct"].forEach(n=>{e.push(this[n])}),e},(e,n)=>{if(this.loadtime===Wo)return;let s=!1,o=[];for(let i=2;i<e.length;i++)e[i]!==n[i]&&(o.push(e[i]),s=!0);e[0]!==n[0]&&(this.mixinDatacomPage.current=this.pageCurrent),this.mixinDatacomPage.size=this.pageSize,this.onMixinDatacomPropsChange(s,o)})},methods:{onMixinDatacomPropsChange(e,n){},mixinDatacomEasyGet({getone:e=!1,success:n,fail:s}={}){this.mixinDatacomLoading||(this.mixinDatacomLoading=!0,this.mixinDatacomErrorMessage="",this.mixinDatacomError=null,this.mixinDatacomGet().then(o=>{this.mixinDatacomLoading=!1;let{data:i,count:r}=o.result;this.getcount&&(this.mixinDatacomPage.count=r),this.mixinDatacomHasMore=i.length<this.pageSize;let a=e?i.length?i[0]:void 0:i;this.mixinDatacomResData=a,n&&n(a)}).catch(o=>{this.mixinDatacomLoading=!1,this.mixinDatacomErrorMessage=o,this.mixinDatacomError=o,s&&s(o)}))},mixinDatacomGet(e={}){let n;e=e||{},n=typeof __uniX!="undefined"&&__uniX?t.databaseForJQL(this.spaceInfo):t.database(this.spaceInfo);let s=e.action||this.action;s&&(n=n.action(s));let o=e.collection||this.collection;n=Array.isArray(o)?n.collection(...o):n.collection(o);let i=e.where||this.where;i&&Object.keys(i).length&&(n=n.where(i));let r=e.field||this.field;r&&(n=n.field(r));let a=e.foreignKey||this.foreignKey;a&&(n=n.foreignKey(a));let l=e.groupby||this.groupby;l&&(n=n.groupBy(l));let c=e.groupField||this.groupField;c&&(n=n.groupField(c)),(e.distinct!==void 0?e.distinct:this.distinct)===!0&&(n=n.distinct());let p=e.orderby||this.orderby;p&&(n=n.orderBy(p));let h=e.pageCurrent!==void 0?e.pageCurrent:this.mixinDatacomPage.current,m=e.pageSize!==void 0?e.pageSize:this.mixinDatacomPage.size,_=e.getcount!==void 0?e.getcount:this.getcount,y=e.gettree!==void 0?e.gettree:this.gettree,d=e.gettreepath!==void 0?e.gettreepath:this.gettreepath,u={getCount:_},f={limitLevel:e.limitlevel!==void 0?e.limitlevel:this.limitlevel,startWith:e.startwith!==void 0?e.startwith:this.startwith};return y&&(u.getTree=f),d&&(u.getTreePath=f),n=n.skip(m*(h-1)).limit(m).get(u),n}}}}function Jo(t){return function(e,n={}){n=function(l,c={}){return l.customUI=c.customUI||l.customUI,l.parseSystemError=c.parseSystemError||l.parseSystemError,Object.assign(l.loadingOptions,c.loadingOptions),Object.assign(l.errorOptions,c.errorOptions),typeof c.secretMethods=="object"&&(l.secretMethods=c.secretMethods),l}({customUI:!1,loadingOptions:{title:"\u52A0\u8F7D\u4E2D...",mask:!0},errorOptions:{type:"modal",retry:!1}},n);let{customUI:s,loadingOptions:o,errorOptions:i,parseSystemError:r}=n,a=!s;return new Proxy({},{get(l,c){switch(c){case"toString":return"[object UniCloudObject]";case"toJSON":return{}}return function({fn:p,interceptorName:h,getCallbackArgs:m}={}){return function(..._){return L(this,null,function*(){let y=m?m({params:_}):{},d,u;try{return yield U(F(h,"invoke"),j({},y)),d=yield p(..._),yield U(F(h,"success"),K(j({},y),{result:d})),d}catch(f){throw u=f,yield U(F(h,"fail"),K(j({},y),{error:u})),u}finally{yield U(F(h,"complete"),u?K(j({},y),{error:u}):K(j({},y),{result:d}))}})}}({fn:function p(...h){return L(this,null,function*(){let m;a&&uni.showLoading({title:o.title,mask:o.mask});let _={name:e,type:Ms,data:{method:c,params:h}};typeof n.secretMethods=="object"&&function(v,b){let A=b.data.method,C=v.secretMethods||{},O=C[A]||C["*"];O&&(b.secretType=O)}(n,_);let y=!1;try{m=yield t.callFunction(_)}catch(v){y=!0,m={result:new P(v)}}let{errSubject:d,errCode:u,errMsg:f,newToken:w}=m.result||{};if(a&&uni.hideLoading(),w&&w.token&&w.tokenExpired&&(En(w),H(Fe,j({},w))),u){let v=f;if(y&&r&&(v=(yield r({objectName:e,methodName:c,params:h,errSubject:d,errCode:u,errMsg:f})).errMsg||f),a)if(i.type==="toast")uni.showToast({title:v,icon:"none"});else{if(i.type!=="modal")throw new Error(`Invalid errorOptions.type: ${i.type}`);{let{confirm:A}=yield function(){return L(this,arguments,function*({title:C,content:O,showCancel:E,cancelText:D,confirmText:X}={}){return new Promise((z,oe)=>{uni.showModal({title:C,content:O,showCancel:E,cancelText:D,confirmText:X,success(Z){z(Z)},fail(){z({confirm:!1,cancel:!0})}})})})}({title:"\u63D0\u793A",content:v,showCancel:i.retry,cancelText:"\u53D6\u6D88",confirmText:i.retry?"\u91CD\u8BD5":"\u786E\u5B9A"});if(i.retry&&A)return p(...h)}}let b=new P({subject:d,code:u,message:f,requestId:m.requestId});throw b.detail=m.result,H(G,{type:Wt,content:b}),b}return H(G,{type:Wt,content:m.result}),m.result})},interceptorName:"callObject",getCallbackArgs:function({params:p}={}){return{objectName:e,methodName:c,params:p}}})}})}}function ns(t){return he("_globalUniCloudSecureNetworkCache__{spaceId}".replace("{spaceId}",t.config.spaceId))}function Go(){return L(this,arguments,function*({openid:t,callLoginByWeixin:e=!1}={}){throw ns(this),new Error(`[SecureNetwork] API \`initSecureNetworkByWeixin\` is not supported on platform \`${In}\``)})}function Qo(t){return L(this,null,function*(){let e=ns(this);return e.initPromise||(e.initPromise=Go.call(this,t).then(n=>n).catch(n=>{throw delete e.initPromise,n})),e.initPromise})}function Yo(t){return function({openid:e,callLoginByWeixin:n=!1}={}){return Qo.call(t,{openid:e,callLoginByWeixin:n})}}function pn(t){let e={getSystemInfo:uni.getSystemInfo,getPushClientId:uni.getPushClientId};return function(n){return new Promise((s,o)=>{e[t](K(j({},n),{success(i){s(i)},fail(i){o(i)}}))})}}var xt=class extends class{constructor(){this._callback={}}addListener(e,n){this._callback[e]||(this._callback[e]=[]),this._callback[e].push(n)}on(e,n){return this.addListener(e,n)}removeListener(e,n){if(!n)throw new Error('The "listener" argument must be of type function. Received undefined');let s=this._callback[e];if(!s)return;let o=function(i,r){for(let a=i.length-1;a>=0;a--)if(i[a]===r)return a;return-1}(s,n);s.splice(o,1)}off(e,n){return this.removeListener(e,n)}removeAllListener(e){delete this._callback[e]}emit(e,...n){let s=this._callback[e];if(s)for(let o=0;o<s.length;o++)s[o](...n)}}{constructor(){super(),this._uniPushMessageCallback=this._receivePushMessage.bind(this),this._currentMessageId=-1,this._payloadQueue=[]}init(){return Promise.all([pn("getSystemInfo")(),pn("getPushClientId")()]).then(([{appId:e}={},{cid:n}={}]=[])=>{if(!e)throw new Error("Invalid appId, please check the manifest.json file");if(!n)throw new Error("Invalid push client id");this._appId=e,this._pushClientId=n,this._seqId=Date.now()+"-"+Math.floor(9e5*Math.random()+1e5),this.emit("open"),this._initMessageListener()},e=>{throw this.emit("error",e),this.close(),e})}open(){return L(this,null,function*(){return this.init()})}_isUniCloudSSE(e){if(e.type!=="receive")return!1;let n=e&&e.data&&e.data.payload;return!(!n||n.channel!=="UNI_CLOUD_SSE"||n.seqId!==this._seqId)}_receivePushMessage(e){if(!this._isUniCloudSSE(e))return;let n=e&&e.data&&e.data.payload,{action:s,messageId:o,message:i}=n;this._payloadQueue.push({action:s,messageId:o,message:i}),this._consumMessage()}_consumMessage(){for(;;){let e=this._payloadQueue.find(n=>n.messageId===this._currentMessageId+1);if(!e)break;this._currentMessageId++,this._parseMessagePayload(e)}}_parseMessagePayload(e){let{action:n,messageId:s,message:o}=e;n==="end"?this._end({messageId:s,message:o}):n==="message"&&this._appendMessage({messageId:s,message:o})}_appendMessage({messageId:e,message:n}={}){this.emit("message",n)}_end({messageId:e,message:n}={}){this.emit("end",n),this.close()}_initMessageListener(){uni.onPushMessage(this._uniPushMessageCallback)}_destroy(){uni.offPushMessage(this._uniPushMessageCallback)}toJSON(){return{appId:this._appId,pushClientId:this._pushClientId,seqId:this._seqId}}close(){this._destroy(),this.emit("close")}};function Xo(t){t._initPromiseHub||(t._initPromiseHub=new Ue({createPromise:function(){let e=Promise.resolve();var n;n=1,e=new Promise(o=>{setTimeout(()=>{o()},n)});let s=t.auth();return e.then(()=>s.getLoginState()).then(o=>o?Promise.resolve():s.signInAnonymously())}}))}var Zo={tcb:nn,tencent:nn,aliyun:Gs,private:mo,alipay:bo},V=new class{init(t){let e={},n=Zo[t.provider];if(!n)throw new Error("\u672A\u63D0\u4F9B\u6B63\u786E\u7684provider\u53C2\u6570");return e=n.init(t),Xo(e),Lo(e),function(s){let o=s.uploadFile;s.uploadFile=function(i){return o.call(this,i)}}(e),function(s){s.database=function(o){if(o&&Object.keys(o).length>0)return s.init(o).database();if(this._database)return this._database;let i=un(Ve,{uniClient:s});return this._database=i,i},s.databaseForJQL=function(o){if(o&&Object.keys(o).length>0)return s.init(o).databaseForJQL();if(this._databaseForJQL)return this._databaseForJQL;let i=un(Ve,{uniClient:s,isJQL:!0});return this._databaseForJQL=i,i}}(e),function(s){s.getCurrentUserInfo=$o,s.chooseAndUploadFile=Vo.initChooseAndUploadFile(s),Object.assign(s,{get mixinDatacom(){return ts(s)}}),s.SSEChannel=xt,s.initSecureNetworkByWeixin=Yo(s),s.importObject=Jo(s)}(e),["callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","chooseAndUploadFile"].forEach(s=>{if(!e[s])return;let o=e[s];e[s]=function(){return o.apply(e,Array.from(arguments))},e[s]=function(i,r){return function(a){let l=!1;r==="callFunction"&&(l=(a&&a.type||zt)!==zt);let c=r==="callFunction"&&!l,p=this._initPromiseHub.exec();a=a||{};let{success:h,fail:m,complete:_}=Ln(a),y=p.then(()=>l?Promise.resolve():U(F(r,"invoke"),a)).then(()=>i.call(this,a)).then(d=>l?Promise.resolve(d):U(F(r,"success"),d).then(()=>U(F(r,"complete"),d)).then(()=>(c&&H(G,{type:Ee,content:d}),Promise.resolve(d))),d=>l?Promise.reject(d):U(F(r,"fail"),d).then(()=>U(F(r,"complete"),d)).then(()=>(H(G,{type:Ee,content:d}),Promise.reject(d))));if(!(h||m||_))return y;y.then(d=>{h&&h(d),_&&_(d),c&&H(G,{type:Ee,content:d})},d=>{m&&m(d),_&&_(d),c&&H(G,{type:Ee,content:d})})}}(e[s],s).bind(e)}),e.init=this.init,e}};(()=>{let t=$s,e={};if(t&&t.length===1)e=t[0],V=V.init(e),V._isDefault=!0;else{let n=["auth","callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","database","getCurrentUSerInfo","importObject"],s;s=t&&t.length>0?"\u5E94\u7528\u6709\u591A\u4E2A\u670D\u52A1\u7A7A\u95F4\uFF0C\u8BF7\u901A\u8FC7uniCloud.init\u65B9\u6CD5\u6307\u5B9A\u8981\u4F7F\u7528\u7684\u670D\u52A1\u7A7A\u95F4":"\u5E94\u7528\u672A\u5173\u8054\u670D\u52A1\u7A7A\u95F4\uFF0C\u8BF7\u5728uniCloud\u76EE\u5F55\u53F3\u952E\u5173\u8054\u670D\u52A1\u7A7A\u95F4",n.forEach(o=>{V[o]=function(){return console.error(s),Promise.reject(new P({code:"SYS_ERR",message:s}))}})}Object.assign(V,{get mixinDatacom(){return ts(V)}}),zo(V),V.addInterceptor=Pn,V.removeInterceptor=Vs,V.interceptObject=Ws})();var ue=V,ei=[{font_class:"arrow-down",unicode:"\uE6BE"},{font_class:"arrow-left",unicode:"\uE6BC"},{font_class:"arrow-right",unicode:"\uE6BB"},{font_class:"arrow-up",unicode:"\uE6BD"},{font_class:"auth",unicode:"\uE6AB"},{font_class:"auth-filled",unicode:"\uE6CC"},{font_class:"back",unicode:"\uE6B9"},{font_class:"bars",unicode:"\uE627"},{font_class:"calendar",unicode:"\uE6A0"},{font_class:"calendar-filled",unicode:"\uE6C0"},{font_class:"camera",unicode:"\uE65A"},{font_class:"camera-filled",unicode:"\uE658"},{font_class:"cart",unicode:"\uE631"},{font_class:"cart-filled",unicode:"\uE6D0"},{font_class:"chat",unicode:"\uE65D"},{font_class:"chat-filled",unicode:"\uE659"},{font_class:"chatboxes",unicode:"\uE696"},{font_class:"chatboxes-filled",unicode:"\uE692"},{font_class:"chatbubble",unicode:"\uE697"},{font_class:"chatbubble-filled",unicode:"\uE694"},{font_class:"checkbox",unicode:"\uE62B"},{font_class:"checkbox-filled",unicode:"\uE62C"},{font_class:"checkmarkempty",unicode:"\uE65C"},{font_class:"circle",unicode:"\uE65B"},{font_class:"circle-filled",unicode:"\uE65E"},{font_class:"clear",unicode:"\uE66D"},{font_class:"close",unicode:"\uE673"},{font_class:"closeempty",unicode:"\uE66C"},{font_class:"cloud-download",unicode:"\uE647"},{font_class:"cloud-download-filled",unicode:"\uE646"},{font_class:"cloud-upload",unicode:"\uE645"},{font_class:"cloud-upload-filled",unicode:"\uE648"},{font_class:"color",unicode:"\uE6CF"},{font_class:"color-filled",unicode:"\uE6C9"},{font_class:"compose",unicode:"\uE67F"},{font_class:"contact",unicode:"\uE693"},{font_class:"contact-filled",unicode:"\uE695"},{font_class:"down",unicode:"\uE6B8"},{font_class:"bottom",unicode:"\uE6B8"},{font_class:"download",unicode:"\uE68D"},{font_class:"download-filled",unicode:"\uE681"},{font_class:"email",unicode:"\uE69E"},{font_class:"email-filled",unicode:"\uE69A"},{font_class:"eye",unicode:"\uE651"},{font_class:"eye-filled",unicode:"\uE66A"},{font_class:"eye-slash",unicode:"\uE6B3"},{font_class:"eye-slash-filled",unicode:"\uE6B4"},{font_class:"fire",unicode:"\uE6A1"},{font_class:"fire-filled",unicode:"\uE6C5"},{font_class:"flag",unicode:"\uE65F"},{font_class:"flag-filled",unicode:"\uE660"},{font_class:"folder-add",unicode:"\uE6A9"},{font_class:"folder-add-filled",unicode:"\uE6C8"},{font_class:"font",unicode:"\uE6A3"},{font_class:"forward",unicode:"\uE6BA"},{font_class:"gear",unicode:"\uE664"},{font_class:"gear-filled",unicode:"\uE661"},{font_class:"gift",unicode:"\uE6A4"},{font_class:"gift-filled",unicode:"\uE6C4"},{font_class:"hand-down",unicode:"\uE63D"},{font_class:"hand-down-filled",unicode:"\uE63C"},{font_class:"hand-up",unicode:"\uE63F"},{font_class:"hand-up-filled",unicode:"\uE63E"},{font_class:"headphones",unicode:"\uE630"},{font_class:"heart",unicode:"\uE639"},{font_class:"heart-filled",unicode:"\uE641"},{font_class:"help",unicode:"\uE679"},{font_class:"help-filled",unicode:"\uE674"},{font_class:"home",unicode:"\uE662"},{font_class:"home-filled",unicode:"\uE663"},{font_class:"image",unicode:"\uE670"},{font_class:"image-filled",unicode:"\uE678"},{font_class:"images",unicode:"\uE650"},{font_class:"images-filled",unicode:"\uE64B"},{font_class:"info",unicode:"\uE669"},{font_class:"info-filled",unicode:"\uE649"},{font_class:"left",unicode:"\uE6B7"},{font_class:"link",unicode:"\uE6A5"},{font_class:"list",unicode:"\uE644"},{font_class:"location",unicode:"\uE6AE"},{font_class:"location-filled",unicode:"\uE6AF"},{font_class:"locked",unicode:"\uE66B"},{font_class:"locked-filled",unicode:"\uE668"},{font_class:"loop",unicode:"\uE633"},{font_class:"mail-open",unicode:"\uE643"},{font_class:"mail-open-filled",unicode:"\uE63A"},{font_class:"map",unicode:"\uE667"},{font_class:"map-filled",unicode:"\uE666"},{font_class:"map-pin",unicode:"\uE6AD"},{font_class:"map-pin-ellipse",unicode:"\uE6AC"},{font_class:"medal",unicode:"\uE6A2"},{font_class:"medal-filled",unicode:"\uE6C3"},{font_class:"mic",unicode:"\uE671"},{font_class:"mic-filled",unicode:"\uE677"},{font_class:"micoff",unicode:"\uE67E"},{font_class:"micoff-filled",unicode:"\uE6B0"},{font_class:"minus",unicode:"\uE66F"},{font_class:"minus-filled",unicode:"\uE67D"},{font_class:"more",unicode:"\uE64D"},{font_class:"more-filled",unicode:"\uE64E"},{font_class:"navigate",unicode:"\uE66E"},{font_class:"navigate-filled",unicode:"\uE67A"},{font_class:"notification",unicode:"\uE6A6"},{font_class:"notification-filled",unicode:"\uE6C1"},{font_class:"paperclip",unicode:"\uE652"},{font_class:"paperplane",unicode:"\uE672"},{font_class:"paperplane-filled",unicode:"\uE675"},{font_class:"person",unicode:"\uE699"},{font_class:"person-filled",unicode:"\uE69D"},{font_class:"personadd",unicode:"\uE69F"},{font_class:"personadd-filled",unicode:"\uE698"},{font_class:"personadd-filled-copy",unicode:"\uE6D1"},{font_class:"phone",unicode:"\uE69C"},{font_class:"phone-filled",unicode:"\uE69B"},{font_class:"plus",unicode:"\uE676"},{font_class:"plus-filled",unicode:"\uE6C7"},{font_class:"plusempty",unicode:"\uE67B"},{font_class:"pulldown",unicode:"\uE632"},{font_class:"pyq",unicode:"\uE682"},{font_class:"qq",unicode:"\uE680"},{font_class:"redo",unicode:"\uE64A"},{font_class:"redo-filled",unicode:"\uE655"},{font_class:"refresh",unicode:"\uE657"},{font_class:"refresh-filled",unicode:"\uE656"},{font_class:"refreshempty",unicode:"\uE6BF"},{font_class:"reload",unicode:"\uE6B2"},{font_class:"right",unicode:"\uE6B5"},{font_class:"scan",unicode:"\uE62A"},{font_class:"search",unicode:"\uE654"},{font_class:"settings",unicode:"\uE653"},{font_class:"settings-filled",unicode:"\uE6CE"},{font_class:"shop",unicode:"\uE62F"},{font_class:"shop-filled",unicode:"\uE6CD"},{font_class:"smallcircle",unicode:"\uE67C"},{font_class:"smallcircle-filled",unicode:"\uE665"},{font_class:"sound",unicode:"\uE684"},{font_class:"sound-filled",unicode:"\uE686"},{font_class:"spinner-cycle",unicode:"\uE68A"},{font_class:"staff",unicode:"\uE6A7"},{font_class:"staff-filled",unicode:"\uE6CB"},{font_class:"star",unicode:"\uE688"},{font_class:"star-filled",unicode:"\uE68F"},{font_class:"starhalf",unicode:"\uE683"},{font_class:"trash",unicode:"\uE687"},{font_class:"trash-filled",unicode:"\uE685"},{font_class:"tune",unicode:"\uE6AA"},{font_class:"tune-filled",unicode:"\uE6CA"},{font_class:"undo",unicode:"\uE64F"},{font_class:"undo-filled",unicode:"\uE64C"},{font_class:"up",unicode:"\uE6B6"},{font_class:"top",unicode:"\uE6B6"},{font_class:"upload",unicode:"\uE690"},{font_class:"upload-filled",unicode:"\uE68E"},{font_class:"videocam",unicode:"\uE68C"},{font_class:"videocam-filled",unicode:"\uE689"},{font_class:"vip",unicode:"\uE6A8"},{font_class:"vip-filled",unicode:"\uE6C6"},{font_class:"wallet",unicode:"\uE6B1"},{font_class:"wallet-filled",unicode:"\uE6C2"},{font_class:"weibo",unicode:"\uE68B"},{font_class:"weixin",unicode:"\uE691"}],ti="/assets/uniicons.32e978a5.ttf",ni={"uni-icons":{"":{fontFamily:"uniicons",textDecoration:"none",textAlign:"center"}}},si=t=>typeof t=="number"||/^[0-9]*$/g.test(t)?t+"px":t,oi=weex.requireModule("dom");oi.addRule("fontFace",{fontFamily:"uniicons",src:"url('"+ti+"')"});var ii={name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""},fontFamily:{type:String,default:""}},data(){return{icons:ei}},computed:{unicode(){let t=this.icons.find(e=>e.font_class===this.type);return t?t.unicode:""},iconSize(){return si(this.size)},styleObj(){return this.fontFamily!==""?`color: ${this.color}; font-size: ${this.iconSize}; font-family: ${this.fontFamily};`:`color: ${this.color}; font-size: ${this.iconSize};`}},methods:{_onClick(){this.$emit("click")}}};function ri(t,e,n,s,o,i){return(0,g.openBlock)(),(0,g.createElementBlock)("u-text",{style:(0,g.normalizeStyle)(i.styleObj),class:"uni-icons",onClick:e[0]||(e[0]=(...r)=>i._onClick&&i._onClick(...r))},(0,g.toDisplayString)(i.unicode),5)}var ss=$(ii,[["render",ri],["styles",[ni]]]),ai=t=>t!==null&&typeof t=="object",ci=["{","}"],Tt=class{constructor(){this._caches=Object.create(null)}interpolate(e,n,s=ci){if(!n)return[e];let o=this._caches[e];return o||(o=di(e,s),this._caches[e]=o),hi(o,n)}},li=/^(?:\d)+/,ui=/^(?:\w)+/;function di(t,[e,n]){let s=[],o=0,i="";for(;o<t.length;){let r=t[o++];if(r===e){i&&s.push({type:"text",value:i}),i="";let a="";for(r=t[o++];r!==void 0&&r!==n;)a+=r,r=t[o++];let l=r===n,c=li.test(a)?"list":l&&ui.test(a)?"named":"unknown";s.push({value:a,type:c})}else i+=r}return i&&s.push({type:"text",value:i}),s}function hi(t,e){let n=[],s=0,o=Array.isArray(e)?"list":ai(e)?"named":"unknown";if(o==="unknown")return n;for(;s<t.length;){let i=t[s];switch(i.type){case"text":n.push(i.value);break;case"list":n.push(e[parseInt(i.value,10)]);break;case"named":o==="named"&&n.push(e[i.value]);break}s++}return n}var ut="zh-Hans",gn="zh-Hant",de="en",fi="fr",pi="es",gi=Object.prototype.hasOwnProperty,mn=(t,e)=>gi.call(t,e),mi=new Tt;function yi(t,e){return!!e.find(n=>t.indexOf(n)!==-1)}function _i(t,e){return e.find(n=>t.indexOf(n)===0)}function yn(t,e){if(!t)return;if(t=t.trim().replace(/_/g,"-"),e&&e[t])return t;if(t=t.toLowerCase(),t==="chinese")return ut;if(t.indexOf("zh")===0)return t.indexOf("-hans")>-1?ut:t.indexOf("-hant")>-1||yi(t,["-tw","-hk","-mo","-cht"])?gn:ut;let n=[de,fi,pi];e&&Object.keys(e).length>0&&(n=Object.keys(e));let s=_i(t,n);if(s)return s}var It=class{constructor({locale:e,fallbackLocale:n,messages:s,watcher:o,formater:i}){this.locale=de,this.fallbackLocale=de,this.message={},this.messages={},this.watchers=[],n&&(this.fallbackLocale=n),this.formater=i||mi,this.messages=s||{},this.setLocale(e||de),o&&this.watchLocale(o)}setLocale(e){let n=this.locale;this.locale=yn(e,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],n!==this.locale&&this.watchers.forEach(s=>{s(this.locale,n)})}getLocale(){return this.locale}watchLocale(e){let n=this.watchers.push(e)-1;return()=>{this.watchers.splice(n,1)}}add(e,n,s=!0){let o=this.messages[e];o?s?Object.assign(o,n):Object.keys(n).forEach(i=>{mn(o,i)||(o[i]=n[i])}):this.messages[e]=n}f(e,n,s){return this.formater.interpolate(e,n,s).join("")}t(e,n,s){let o=this.message;return typeof n=="string"?(n=yn(n,this.messages),n&&(o=this.messages[n])):s=n,mn(o,e)?this.formater.interpolate(o[e],s).join(""):(console.warn(`Cannot translate the value of keypath ${e}. Use the value of keypath as default.`),e)}};function wi(t,e){t.$watchLocale?t.$watchLocale(n=>{e.setLocale(n)}):t.$watch(()=>t.$locale,n=>{e.setLocale(n)})}function bi(){return typeof uni!="undefined"&&uni.getLocale?uni.getLocale():typeof global!="undefined"&&global.getLocale?global.getLocale():de}function Je(t,e={},n,s){typeof t!="string"&&([t,e]=[e,t]),typeof t!="string"&&(t=bi()),typeof n!="string"&&(n=typeof __uniConfig!="undefined"&&__uniConfig.fallbackLocale||de);let o=new It({locale:t,fallbackLocale:n,messages:e,watcher:s}),i=(r,a)=>{if(typeof getApp!="function")i=function(l,c){return o.t(l,c)};else{let l=!1;i=function(c,p){let h=getApp().$vm;return h&&(h.$locale,l||(l=!0,wi(h,o))),o.t(c,p)}}return i(r,a)};return{i18n:o,f(r,a,l){return o.f(r,a,l)},t(r,a){return i(r,a)},add(r,a,l=!0){return o.add(r,a,l)},watch(r){return o.watchLocale(r)},getLocale(){return o.getLocale()},setLocale(r){return o.setLocale(r)}}}var vi={"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"Search enter content"},Si={"uni-search-bar.cancel":"\u53D6\u6D88","uni-search-bar.placeholder":"\u8BF7\u8F93\u5165\u641C\u7D22\u5185\u5BB9"},ki={"uni-search-bar.cancel":"\u53D6\u6D88","uni-search-bar.placeholder":"\u8ACB\u8F38\u5165\u641C\u7D22\u5167\u5BB9"},xi={en:vi,"zh-Hans":Si,"zh-Hant":ki},Ti={"uni-searchbar":{"":{flexDirection:"row",position:"relative",paddingTop:10,paddingRight:10,paddingBottom:10,paddingLeft:10}},"uni-searchbar__box":{"":{overflow:"hidden",position:"relative",flex:1,justifyContent:"center",flexDirection:"row",alignItems:"center",height:36,paddingTop:5,paddingRight:8,paddingBottom:5,paddingLeft:0}},"uni-searchbar__box-icon-search":{"":{flexDirection:"row",paddingTop:0,paddingRight:8,paddingBottom:0,paddingLeft:8,justifyContent:"center",alignItems:"center",color:"#B3B3B3"}},"uni-searchbar__box-search-input":{"":{flex:1,fontSize:14,color:"#333333"}},"uni-searchbar__box-icon-clear":{"":{alignItems:"center",lineHeight:24,paddingLeft:8}},"uni-searchbar__text-placeholder":{"":{fontSize:14,color:"#B3B3B3",marginLeft:5}},"uni-searchbar__cancel":{"":{paddingLeft:10,lineHeight:36,fontSize:14,color:"#333333"}}},{t:_n}=Je(xi),Ii={name:"UniSearchBar",emits:["input","update:modelValue","clear","cancel","confirm","blur","focus"],props:{placeholder:{type:String,default:""},radius:{type:[Number,String],default:5},clearButton:{type:String,default:"auto"},cancelButton:{type:String,default:"auto"},cancelText:{type:String,default:""},bgColor:{type:String,default:"#F8F8F8"},maxlength:{type:[Number,String],default:100},value:{type:[Number,String],default:""},modelValue:{type:[Number,String],default:""},focus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},data(){return{show:!1,showSync:!1,searchVal:""}},computed:{cancelTextI18n(){return this.cancelText||_n("uni-search-bar.cancel")},placeholderText(){return this.placeholder||_n("uni-search-bar.placeholder")}},watch:{modelValue:{immediate:!0,handler(t){this.searchVal=t,t&&(this.show=!0)}},focus:{immediate:!0,handler(t){if(t){if(this.readonly)return;this.show=!0,this.$nextTick(()=>{this.showSync=!0})}}},searchVal(t,e){this.$emit("input",t),this.$emit("update:modelValue",t)}},methods:{searchClick(){this.readonly||this.show||(this.show=!0,this.$nextTick(()=>{this.showSync=!0}))},clear(){this.$emit("clear",{value:this.searchVal}),this.searchVal=""},cancel(){this.readonly||(this.$emit("cancel",{value:this.searchVal}),this.searchVal="",this.show=!1,this.showSync=!1,plus.key.hideSoftKeybord())},confirm(){plus.key.hideSoftKeybord(),this.$emit("confirm",{value:this.searchVal})},blur(){plus.key.hideSoftKeybord(),this.$emit("blur",{value:this.searchVal})},emitFocus(t){this.$emit("focus",t.detail)}}};function Ai(t,e,n,s,o,i){let r=W((0,g.resolveDynamicComponent)("uni-icons"),ss);return(0,g.openBlock)(),(0,g.createElementBlock)("view",{class:"uni-searchbar",renderWhole:!0},[(0,g.createElementVNode)("view",{style:(0,g.normalizeStyle)({borderRadius:n.radius+"px",backgroundColor:n.bgColor}),class:"uni-searchbar__box",onClick:e[5]||(e[5]=(...a)=>i.searchClick&&i.searchClick(...a))},[(0,g.createElementVNode)("view",{class:"uni-searchbar__box-icon-search"},[(0,g.renderSlot)(t.$slots,"searchIcon",{},()=>[(0,g.createVNode)(r,{color:"#c0c4cc",size:"18",type:"search"})])]),o.show||o.searchVal?((0,g.openBlock)(),(0,g.createElementBlock)("u-input",{key:0,focus:o.showSync,disabled:n.readonly,placeholder:i.placeholderText,maxlength:n.maxlength,class:"uni-searchbar__box-search-input",confirmType:"search",type:"text",modelValue:o.searchVal,onInput:e[0]||(e[0]=a=>o.searchVal=a.detail.value),onConfirm:e[1]||(e[1]=(...a)=>i.confirm&&i.confirm(...a)),onBlur:e[2]||(e[2]=(...a)=>i.blur&&i.blur(...a)),onFocus:e[3]||(e[3]=(...a)=>i.emitFocus&&i.emitFocus(...a))},null,40,["focus","disabled","placeholder","maxlength","modelValue"])):((0,g.openBlock)(),(0,g.createElementBlock)("u-text",{key:1,class:"uni-searchbar__text-placeholder"},(0,g.toDisplayString)(n.placeholder),1)),o.show&&(n.clearButton==="always"||n.clearButton==="auto"&&o.searchVal!=="")&&!n.readonly?((0,g.openBlock)(),(0,g.createElementBlock)("view",{key:2,class:"uni-searchbar__box-icon-clear",onClick:e[4]||(e[4]=(...a)=>i.clear&&i.clear(...a))},[(0,g.renderSlot)(t.$slots,"clearIcon",{},()=>[(0,g.createVNode)(r,{color:"#c0c4cc",size:"20",type:"clear"})])])):(0,g.createCommentVNode)("",!0)],4),n.cancelButton==="always"||o.show&&n.cancelButton==="auto"?((0,g.openBlock)(),(0,g.createElementBlock)("u-text",{key:0,onClick:e[6]||(e[6]=(...a)=>i.cancel&&i.cancel(...a)),class:"uni-searchbar__cancel"},(0,g.toDisplayString)(i.cancelTextI18n),1)):(0,g.createCommentVNode)("",!0)])}var os=$(Ii,[["render",Ai],["styles",[Ti]]]),Pi={"uni-badge--x":{"":{position:"relative"}},"uni-badge--absolute":{"":{position:"absolute"}},"uni-badge--small":{"":{transform:"scale(0.8)",transformOrigin:"center center"}},"uni-badge":{"":{justifyContent:"center",flexDirection:"row",height:20,paddingTop:0,paddingRight:4,paddingBottom:0,paddingLeft:4,lineHeight:18,color:"#ffffff",borderRadius:100,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderStyle:"solid",borderColor:"#ffffff",textAlign:"center",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSize:12}},"uni-badge--info":{"":{color:"#ffffff",backgroundColor:"#909399"}},"uni-badge--primary":{"":{backgroundColor:"#2979ff"}},"uni-badge--success":{"":{backgroundColor:"#4cd964"}},"uni-badge--warning":{"":{backgroundColor:"#f0ad4e"}},"uni-badge--error":{"":{backgroundColor:"#dd524d"}},"uni-badge--inverted":{"":{paddingTop:0,paddingRight:5,paddingBottom:0,paddingLeft:0,color:"#909399"}},"uni-badge--info-inverted":{"":{color:"#909399",backgroundColor:"rgba(0,0,0,0)"}},"uni-badge--primary-inverted":{"":{color:"#2979ff",backgroundColor:"rgba(0,0,0,0)"}},"uni-badge--success-inverted":{"":{color:"#4cd964",backgroundColor:"rgba(0,0,0,0)"}},"uni-badge--warning-inverted":{"":{color:"#f0ad4e",backgroundColor:"rgba(0,0,0,0)"}},"uni-badge--error-inverted":{"":{color:"#dd524d",backgroundColor:"rgba(0,0,0,0)"}}},Ci={name:"UniBadge",emits:["click"],props:{type:{type:String,default:"error"},inverted:{type:Boolean,default:!1},isDot:{type:Boolean,default:!1},maxNum:{type:Number,default:99},absolute:{type:String,default:""},offset:{type:Array,default(){return[0,0]}},text:{type:[String,Number],default:""},size:{type:String,default:"small"},customStyle:{type:Object,default(){return{}}}},data(){return{}},computed:{width(){return String(this.text).length*8+12},classNames(){let{inverted:t,type:e,size:n,absolute:s}=this;return[t?"uni-badge--"+e+"-inverted":"","uni-badge--"+e,"uni-badge--"+n,s?"uni-badge--absolute":""].join(" ")},positionStyle(){if(!this.absolute)return{};let t=this.width/2,e=10;this.isDot&&(t=5,e=5);let n=`${-t+this.offset[0]}px`,s=`${-e+this.offset[1]}px`,o={rightTop:{right:n,top:s},rightBottom:{right:n,bottom:s},leftBottom:{left:n,bottom:s},leftTop:{left:n,top:s}},i=o[this.absolute];return i||o.rightTop},dotStyle(){return this.isDot?{width:"10px",minWidth:"0",height:"10px",padding:"0",borderRadius:"10px"}:{}},displayValue(){let{isDot:t,text:e,maxNum:n}=this;return t?"":Number(e)>n?`${n}+`:e}},methods:{onClick(){this.$emit("click")}}};function Li(t,e,n,s,o,i){return(0,g.openBlock)(),(0,g.createElementBlock)("view",{class:"uni-badge--x",renderWhole:!0},[(0,g.renderSlot)(t.$slots,"default"),n.text?((0,g.openBlock)(),(0,g.createElementBlock)("u-text",{key:0,class:(0,g.normalizeClass)([i.classNames,"uni-badge"]),style:(0,g.normalizeStyle)([i.positionStyle,n.customStyle,i.dotStyle]),onClick:e[0]||(e[0]=r=>i.onClick())},(0,g.toDisplayString)(i.displayValue),7)):(0,g.createCommentVNode)("",!0)])}var Oi=$(Ci,[["render",Li],["styles",[Pi]]]),Ei={"uni-list-item":{"":{fontSize:16,position:"relative",justifyContent:"space-between",alignItems:"center",backgroundColor:"#ffffff",flexDirection:"row"}},"uni-list-item--disabled":{"":{opacity:.3}},"uni-list-item--hover":{"":{"!backgroundColor":"#f1f1f1"}},"uni-list-item__container":{"":{position:"relative",flexDirection:"row",paddingTop:12,paddingRight:15,paddingBottom:12,paddingLeft:15,flex:1,overflow:"hidden"}},"container--right":{"":{paddingRight:0}},"uni-list--border":{"":{position:"absolute",top:0,right:0,left:0,borderTopColor:"#e5e5e5",borderTopStyle:"solid",borderTopWidth:.5}},"uni-list-item__content":{"":{paddingRight:8,flex:1,color:"#3b4144",flexDirection:"column",justifyContent:"space-between",overflow:"hidden"}},"uni-list-item__content--center":{"":{justifyContent:"center"}},"uni-list-item__content-title":{"":{fontSize:14,color:"#3b4144",overflow:"hidden"}},"uni-list-item__content-note":{"":{marginTop:"6rpx",color:"#999999",fontSize:12,overflow:"hidden"}},"uni-list-item__extra":{"":{flexDirection:"row",justifyContent:"flex-end",alignItems:"center"}},"uni-list-item__header":{"":{flexDirection:"row",alignItems:"center"}},"uni-list-item__icon":{"":{marginRight:"18rpx",flexDirection:"row",justifyContent:"center",alignItems:"center"}},"uni-list-item__icon-img":{"":{height:26,width:26,marginRight:10}},"uni-icon-wrapper":{"":{alignItems:"center",paddingTop:0,paddingRight:10,paddingBottom:0,paddingLeft:10}},"flex--direction":{"":{flexDirection:"column"}},"uni-list--lg":{"":{height:40,width:40}},"uni-list--base":{"":{height:26,width:26}},"uni-list--sm":{"":{height:20,width:20}},"uni-list-item__extra-text":{"":{color:"#999999",fontSize:12}},"uni-ellipsis-1":{"":{lines:1,textOverflow:"ellipsis"}},"uni-ellipsis-2":{"":{lines:2,textOverflow:"ellipsis"}}},Ri={name:"UniListItem",emits:["click","switchChange"],props:{direction:{type:String,default:"row"},title:{type:String,default:""},note:{type:String,default:""},ellipsis:{type:[Number,String],default:0},disabled:{type:[Boolean,String],default:!1},clickable:{type:Boolean,default:!1},showArrow:{type:[Boolean,String],default:!1},link:{type:[Boolean,String],default:!1},to:{type:String,default:""},showBadge:{type:[Boolean,String],default:!1},showSwitch:{type:[Boolean,String],default:!1},switchChecked:{type:[Boolean,String],default:!1},badgeText:{type:String,default:""},badgeType:{type:String,default:"success"},badgeStyle:{type:Object,default(){return{}}},rightText:{type:String,default:""},thumb:{type:String,default:""},thumbSize:{type:String,default:"base"},showExtraIcon:{type:[Boolean,String],default:!1},extraIcon:{type:Object,default(){return{type:"",color:"#000000",size:20,customPrefix:""}}},border:{type:Boolean,default:!0},customStyle:{type:Object,default(){return{padding:"",backgroundColor:"#FFFFFF"}}},keepScrollPosition:{type:Boolean,default:!1}},watch:{"customStyle.padding":{handler(t){typeof t=="number"&&(t+="");let e=t.split(" ");if(e.length===1){let n=e[0];this.padding={top:n,right:n,bottom:n,left:n}}else if(e.length===2){let[n,s]=e;this.padding={top:n,right:s,bottom:n,left:s}}else if(e.length===4){let[n,s,o,i]=e;this.padding={top:n,right:s,bottom:o,left:i}}},immediate:!0}},data(){return{isFirstChild:!1,padding:{top:"",right:"",bottom:"",left:""}}},mounted(){this.list=this.getForm(),this.list&&(this.list.firstChildAppend||(this.list.firstChildAppend=!0,this.isFirstChild=!0))},methods:{getForm(t="uniList"){let e=this.$parent,n=e.$options.name;for(;n!==t;){if(e=e.$parent,!e)return!1;n=e.$options.name}return e},onClick(){if(this.to!==""){this.openPage();return}(this.clickable||this.link)&&this.$emit("click",{data:{}})},onSwitchChange(t){this.$emit("switchChange",t.detail)},openPage(){["navigateTo","redirectTo","reLaunch","switchTab"].indexOf(this.link)!==-1?this.pageApi(this.link):this.pageApi("navigateTo")},pageApi(t){let e={url:this.to,success:n=>{this.$emit("click",{data:n})},fail:n=>{this.$emit("click",{data:n})}};switch(t){case"navigateTo":uni.navigateTo(e);break;case"redirectTo":uni.redirectTo(e);break;case"reLaunch":uni.reLaunch(e);break;case"switchTab":uni.switchTab(e);break;default:uni.navigateTo(e)}}}};function ji(t,e,n,s,o,i){let r=W((0,g.resolveDynamicComponent)("uni-icons"),ss),a=W((0,g.resolveDynamicComponent)("uni-badge"),Oi),l=(0,g.resolveComponent)("switch");return(0,g.openBlock)(),(0,g.createElementBlock)("cell",{keepScrollPosition:n.keepScrollPosition},[(0,g.createElementVNode)("view",{class:(0,g.normalizeClass)([{"uni-list-item--disabled":n.disabled},"uni-list-item"]),style:(0,g.normalizeStyle)({"background-color":n.customStyle.backgroundColor}),hoverClass:!n.clickable&&!n.link||n.disabled||n.showSwitch?"":"uni-list-item--hover",onClick:e[0]||(e[0]=(...c)=>i.onClick&&i.onClick(...c))},[o.isFirstChild?(0,g.createCommentVNode)("",!0):((0,g.openBlock)(),(0,g.createElementBlock)("view",{key:0,class:(0,g.normalizeClass)(["border--left",{"uni-list--border":n.border}])},null,2)),(0,g.createElementVNode)("view",{class:(0,g.normalizeClass)(["uni-list-item__container",{"container--right":n.showArrow||n.link,"flex--direction":n.direction==="column"}]),style:(0,g.normalizeStyle)({paddingTop:o.padding.top,paddingLeft:o.padding.left,paddingRight:o.padding.right,paddingBottom:o.padding.bottom})},[(0,g.renderSlot)(t.$slots,"header",{},()=>[(0,g.createElementVNode)("view",{class:"uni-list-item__header"},[n.thumb?((0,g.openBlock)(),(0,g.createElementBlock)("view",{key:0,class:"uni-list-item__icon"},[(0,g.createElementVNode)("u-image",{src:n.thumb,class:(0,g.normalizeClass)(["uni-list-item__icon-img",["uni-list--"+n.thumbSize]])},null,10,["src"])])):n.showExtraIcon?((0,g.openBlock)(),(0,g.createElementBlock)("view",{key:1,class:"uni-list-item__icon"},[(0,g.createVNode)(r,{customPrefix:n.extraIcon.customPrefix,color:n.extraIcon.color,size:n.extraIcon.size,type:n.extraIcon.type},null,8,["customPrefix","color","size","type"])])):(0,g.createCommentVNode)("",!0)])]),(0,g.renderSlot)(t.$slots,"body",{},()=>[(0,g.createElementVNode)("view",{class:(0,g.normalizeClass)(["uni-list-item__content",{"uni-list-item__content--center":n.thumb||n.showExtraIcon||n.showBadge||n.showSwitch}])},[n.title?((0,g.openBlock)(),(0,g.createElementBlock)("u-text",{key:0,class:(0,g.normalizeClass)(["uni-list-item__content-title",[n.ellipsis!==0&&n.ellipsis<=2?"uni-ellipsis-"+n.ellipsis:""]])},(0,g.toDisplayString)(n.title),3)):(0,g.createCommentVNode)("",!0),n.note?((0,g.openBlock)(),(0,g.createElementBlock)("u-text",{key:1,class:"uni-list-item__content-note"},(0,g.toDisplayString)(n.note),1)):(0,g.createCommentVNode)("",!0)],2)]),(0,g.renderSlot)(t.$slots,"footer",{},()=>[n.rightText||n.showBadge||n.showSwitch?((0,g.openBlock)(),(0,g.createElementBlock)("view",{key:0,class:(0,g.normalizeClass)(["uni-list-item__extra",{"flex--justify":n.direction==="column"}])},[n.rightText?((0,g.openBlock)(),(0,g.createElementBlock)("u-text",{key:0,class:"uni-list-item__extra-text"},(0,g.toDisplayString)(n.rightText),1)):(0,g.createCommentVNode)("",!0),n.showBadge?((0,g.openBlock)(),(0,g.createBlock)(a,{key:1,type:n.badgeType,text:n.badgeText,"custom-style":n.badgeStyle},null,8,["type","text","custom-style"])):(0,g.createCommentVNode)("",!0),n.showSwitch?((0,g.openBlock)(),(0,g.createBlock)(l,{key:2,disabled:n.disabled,checked:n.switchChecked,onChange:i.onSwitchChange},null,8,["disabled","checked","onChange"])):(0,g.createCommentVNode)("",!0)],2)):(0,g.createCommentVNode)("",!0)])],6),n.showArrow||n.link?((0,g.openBlock)(),(0,g.createBlock)(r,{key:1,size:16,class:"uni-icon-wrapper",color:"#bbb",type:"arrowright"})):(0,g.createCommentVNode)("",!0)],14,["hoverClass"])],8,["keepScrollPosition"])}var is=$(Ri,[["render",ji],["styles",[Ei]]]),Di={"uni-list":{"":{backgroundColor:"#ffffff",position:"relative",flexDirection:"column"}},"uni-list--border":{"":{position:"relative",borderTopColor:"#e5e5e5",borderTopStyle:"solid",borderTopWidth:.5,borderBottomColor:"#e5e5e5",borderBottomStyle:"solid",borderBottomWidth:.5,zIndex:-1}}},Ni={name:"uniList","mp-weixin":{options:{multipleSlots:!1}},props:{stackFromEnd:{type:Boolean,default:!1},enableBackToTop:{type:[Boolean,String],default:!1},scrollY:{type:[Boolean,String],default:!1},border:{type:Boolean,default:!0},renderReverse:{type:Boolean,default:!1}},created(){this.firstChildAppend=!1},methods:{loadMore(t){this.$emit("scrolltolower")},scroll(t){this.$emit("scroll",t)}}};function Mi(t,e,n,s,o,i){return(0,g.openBlock)(),(0,g.createElementBlock)("list",{bounce:!1,scrollable:!0,showScrollbar:"",renderReverse:n.renderReverse,onScroll:e[0]||(e[0]=(...r)=>i.scroll&&i.scroll(...r)),class:(0,g.normalizeClass)(["uni-list",{"uni-list--border":n.border}]),enableBackToTop:n.enableBackToTop,loadmoreoffset:"15"},[(0,g.renderSlot)(t.$slots,"default")],42,["renderReverse","enableBackToTop"])}var rs=$(Ni,[["render",Mi],["styles",[Di]]]),Ui={"uniCloud.component.add.success":"Success","uniCloud.component.update.success":"Success","uniCloud.component.remove.showModal.title":"Tips","uniCloud.component.remove.showModal.content":"\u662F\u5426\u5220\u9664\u8BE5\u6570\u636E"},Fi={"uniCloud.component.add.success":"\u65B0\u589E\u6210\u529F","uniCloud.component.update.success":"\u4FEE\u6539\u6210\u529F","uniCloud.component.remove.showModal.title":"\u63D0\u793A","uniCloud.component.remove.showModal.content":"\u662F\u5426\u5220\u9664\u8BE5\u6570\u636E"},Bi={"uniCloud.component.add.success":"\u65B0\u589E\u6210\u529F","uniCloud.component.update.success":"\u4FEE\u6539\u6210\u529F","uniCloud.component.remove.showModal.title":"\u63D0\u793A","uniCloud.component.remove.showModal.content":"\u662F\u5426\u5220\u9664\u8BE5\u6570\u636E"},qi={"uniCloud.component.add.success":"\u65B0\u589E\u6210\u529F","uniCloud.component.update.success":"\u4FEE\u6539\u6210\u529F","uniCloud.component.remove.showModal.title":"\u63D0\u793A","uniCloud.component.remove.showModal.content":"\u662F\u5426\u5220\u9664\u8BE5\u6570\u636E"},zi={"uniCloud.component.add.success":"\u65B0\u589E\u6210\u529F","uniCloud.component.update.success":"\u4FEE\u6539\u6210\u529F","uniCloud.component.remove.showModal.title":"\u63D0\u793A","uniCloud.component.remove.showModal.content":"\u662F\u5426\u522A\u9664\u6578\u64DA"},Ki={en:Ui,es:Fi,fr:Bi,"zh-Hans":qi,"zh-Hant":zi},dt=Array.isArray,{t:De}=Je(Ki),wn={load:"load",error:"error"},Ne={add:"add",replace:"replace"},ht={auto:"auto",onready:"onready",manual:"manual"},$i=["pageCurrent","pageSize","collection","action","field","getcount","orderby","where","groupby","groupField","distinct"],Hi={name:"UniClouddb",setup(t){let e=t.ssrKey?t.getone?qt(void 0,t.ssrKey):Bt([],t.ssrKey):t.getone?qt(void 0,"wXIT+ID9qgb8kJ51heCErg=="):Bt([],"qfHbg1cEyUjU7m4i/TChXg=="),n=(0,g.getCurrentInstance)();return(0,g.onMounted)(()=>{(!e.value||e.value.length===0)&&!t.manual&&t.loadtime===ht.auto&&n.proxy.loadData()}),{dataList:e}},serverPrefetch(){return L(this,null,function*(){if(!this.manual&&this.loadtime===ht.auto)return this.loadData()})},props:{options:{type:[Object,Array],default(){return{}}},spaceInfo:{type:Object,default(){return{}}},collection:{type:[String,Array],default:""},action:{type:String,default:""},field:{type:String,default:""},orderby:{type:String,default:""},where:{type:[String,Object],default:""},pageData:{type:String,default:"add"},pageCurrent:{type:Number,default:1},pageSize:{type:Number,default:20},getcount:{type:[Boolean,String],default:!1},getone:{type:[Boolean,String],default:!1},gettree:{type:[Boolean,String,Object],default:!1},gettreepath:{type:[Boolean,String],default:!1},startwith:{type:String,default:""},limitlevel:{type:Number,default:10},groupby:{type:String,default:""},groupField:{type:String,default:""},distinct:{type:[Boolean,String],default:!1},pageIndistinct:{type:[Boolean,String],default:!1},foreignKey:{type:String,default:""},loadtime:{type:String,default:"auto"},manual:{type:Boolean,default:!1},ssrKey:{type:[String,Number],default:""}},data(){return{loading:!1,hasMore:!1,paginationInternal:{},errorMessage:""}},computed:{collectionArgs(){return dt(this.collection)?this.collection:[this.collection]},isLookup(){return dt(this.collection)&&this.collection.length>1||typeof this.collection=="string"&&this.collection.indexOf(",")>-1},mainCollection(){return typeof this.collection=="string"?this.collection.split(",")[0]:JSON.parse(JSON.stringify(this.collection[0])).$db[0].$param[0]}},created(){this._isEnded=!1,this.paginationInternal={current:this.pageCurrent,size:this.pageSize,count:0},this.$watch(()=>{var t=[];return $i.forEach(e=>{t.push(this[e])}),t},(t,e)=>{if(this.paginationInternal.size=this.pageSize,t[0]!==e[0]&&(this.paginationInternal.current=this.pageCurrent),this.loadtime===ht.manual)return;let n=!1;for(let s=2;s<t.length;s++)if(t[s]!==e[s]){n=!0;break}n&&(this.clear(),this.reset()),this._execLoadData()})},methods:{loadData(t,e){let n=null,s=!1;return typeof t=="object"?(t.clear&&(this.pageData===Ne.replace?this.clear():s=t.clear,this.reset()),t.current!==void 0&&(this.paginationInternal.current=t.current),typeof e=="function"&&(n=e)):typeof t=="function"&&(n=t),this._execLoadData(n,s)},loadMore(){this._isEnded||this.loading||(this.pageData===Ne.add&&this.paginationInternal.current++,this._execLoadData())},refresh(){this.clear(),this._execLoadData()},clear(){this._isEnded=!1,this.dataList=[]},reset(){this.paginationInternal.current=1},add(t,{action:e,showToast:n=!0,toastTitle:s,success:o,fail:i,complete:r,needConfirm:a=!0,needLoading:l=!0,loadingTitle:c=""}={}){l&&uni.showLoading({title:c});let p=ue.database(this.spaceInfo);e&&(p=p.action(e)),p.collection(this.mainCollection).add(t).then(h=>{o&&o(h),n&&uni.showToast({title:s||De("uniCloud.component.add.success")})}).catch(h=>{i&&i(h),a&&uni.showModal({content:h.message,showCancel:!1})}).finally(()=>{l&&uni.hideLoading(),r&&r()})},remove(t,{action:e,success:n,fail:s,complete:o,confirmTitle:i,confirmContent:r,needConfirm:a=!0,needLoading:l=!0,loadingTitle:c=""}={}){if(!(!t||!t.length)){if(!a){this._execRemove(t,e,n,s,o,a,l,c);return}uni.showModal({title:i||De("uniCloud.component.remove.showModal.title"),content:r||De("uniCloud.component.remove.showModal.content"),showCancel:!0,success:p=>{p.confirm&&this._execRemove(t,e,n,s,o,a,l,c)}})}},update(t,e,{action:n,showToast:s=!0,toastTitle:o,success:i,fail:r,complete:a,needConfirm:l=!0,needLoading:c=!0,loadingTitle:p=""}={}){c&&uni.showLoading({title:p});let h=ue.database(this.spaceInfo);return n&&(h=h.action(n)),h.collection(this.mainCollection).doc(t).update(e).then(m=>{i&&i(m),s&&uni.showToast({title:o||De("uniCloud.component.update.success")})}).catch(m=>{r&&r(m),l&&uni.showModal({content:m.message,showCancel:!1})}).finally(()=>{c&&uni.hideLoading(),a&&a()})},getTemp(t=!0){let e=ue.database(this.spaceInfo);this.action&&(e=e.action(this.action)),e=e.collection(...this.collectionArgs),this.foreignKey&&(e=e.foreignKey(this.foreignKey)),!this.where||!Object.keys(this.where).length||(e=e.where(this.where)),this.field&&(e=e.field(this.field)),this.groupby&&(e=e.groupBy(this.groupby)),this.groupField&&(e=e.groupField(this.groupField)),this.distinct===!0&&(e=e.distinct()),this.orderby&&(e=e.orderBy(this.orderby));let{current:n,size:s}=this.paginationInternal,o={};this.getcount&&(o.getCount=this.getcount);let i={limitLevel:this.limitlevel,startWith:this.startwith};return this.gettree&&(o.getTree=i),this.gettreepath&&(o.getTreePath=i),e=e.skip(s*(n-1)).limit(s),t?(e=e.getTemp(o),e.udb=this):e=e.get(o),e},setResult(t){t.code===0?this._execLoadDataSuccess(t):this._execLoadDataFail(new Error(t.message))},_execLoadData(t,e){if(!this.loading)return this.loading=!0,this.errorMessage="",this._getExec().then(n=>{this.loading=!1,this._execLoadDataSuccess(n.result,t,e)}).catch(n=>{this.loading=!1,this._execLoadDataFail(n,t)})},_execLoadDataSuccess(t,e,n){let{data:s,count:o}=t;this._isEnded=o!==void 0?this.paginationInternal.current*this.paginationInternal.size>=o:s.length<this.pageSize,this.hasMore=!this._isEnded;let i=this.getone?s.length?s[0]:void 0:s;this.getcount&&(this.paginationInternal.count=o),e&&e(i,this._isEnded,this.paginationInternal),this._dispatchEvent(wn.load,i),this.getone||this.pageData===Ne.replace?this.dataList=i:n?this.dataList=i:this.dataList.push(...i)},_execLoadDataFail(t,e){this.errorMessage=t,e&&e(),this.$emit(wn.error,t)},_getExec(){return this.getTemp(!1)},_execRemove(t,e,n,s,o,i,r,a){if(!this.collection||!t)return;let l=dt(t)?t:[t];if(!l.length)return;r&&uni.showLoading({mask:!0,title:a});let c=ue.database(this.spaceInfo),p=c.command,h=c;e&&(h=h.action(e)),h.collection(this.mainCollection).where({_id:p.in(l)}).remove().then(m=>{n&&n(m.result),this.pageData===Ne.replace?this.refresh():this.removeData(l)}).catch(m=>{s&&s(m),i&&uni.showModal({content:m.message,showCancel:!1})}).finally(()=>{r&&uni.hideLoading(),o&&o()})},removeData(t){let e=t.slice(0),n=this.dataList;for(let s=n.length-1;s>=0;s--){let o=e.indexOf(n[s]._id);o>=0&&(n.splice(s,1),e.splice(o,1))}},_dispatchEvent(t,e){this._changeDataFunction?this._changeDataFunction(e,this._isEnded,this.paginationInternal):this.$emit(t,e,this._isEnded,this.paginationInternal)}}};function Vi(t,e,n,s,o,i){return(0,g.openBlock)(),(0,g.createElementBlock)("view",{renderWhole:!0},[(0,g.renderSlot)(t.$slots,"default",{options:n.options,data:s.dataList,pagination:o.paginationInternal,loading:o.loading,hasMore:o.hasMore,error:o.errorMessage})])}var as=$(Hi,[["render",Vi]]);var S=Ut(Ze());var Wi={refreshBox:{"":{width:"750rpx",height:50,justifyContent:"center",alignItems:"center",flexDirection:"row"}},refreshImg:{"":{width:"55rpx",height:"55rpx",zIndex:111}},refreshText:{"":{fontSize:"26rpx",color:"#999999",paddingLeft:"6rpx"}}},Ji={data(){return{showRefresh:!1,state:0}},methods:{onpullingdown({pullingDistance:t,viewHeight:e}){t<e?this.state=0:this.state=1},refresh(){this.showRefresh=!0,this.state=2,this.$emit("refresh")}},watch:{loading(t,e){t||(this.showRefresh=!1,this.state=3)}},props:{loading:{type:Boolean,default(){return!1}},config:{type:Array,default(){return[{text:"\u7EE7\u7EED\u4E0B\u62C9\u6267\u884C\u5237\u65B0",img:""},{text:"\u91CA\u653E\u7ACB\u5373\u5237\u65B0",img:""},{text:"\u6B63\u5728\u75AF\u72C2\u7684\u52A0\u8F7D\u4E2D",img:""},{text:"\u52A0\u8F7D\u6210\u529F",img:""}]}}}};function Gi(t,e,n,s,o,i){return(0,S.openBlock)(),(0,S.createElementBlock)("refresh",{onRefresh:e[0]||(e[0]=(...r)=>i.refresh&&i.refresh(...r)),onPullingdown:e[1]||(e[1]=(...r)=>i.onpullingdown&&i.onpullingdown(...r)),display:o.showRefresh?"show":"hide"},[(0,S.createElementVNode)("view",{class:"refreshBox"},[(0,S.createElementVNode)("u-text",{class:"refreshText"},(0,S.toDisplayString)(n.config[o.state].text),1)])],40,["display"])}var Qi=$(Ji,[["render",Gi],["styles",[Wi]]]);function se(t,e=2){for(t+="";t.length<e;)t="0"+t;return t.slice(-e)}var Yi={yyyy:t=>se(t.year,4),yy:t=>se(t.year),MM:t=>se(t.month),M:t=>t.month,dd:t=>se(t.day),d:t=>t.day,hh:t=>se(t.hour),h:t=>t.hour,mm:t=>se(t.minute),m:t=>t.minute,ss:t=>se(t.second),s:t=>t.second,SSS:t=>se(t.millisecond,3),S:t=>t.millisecond};function ls(t){if(t instanceof Date)return t;switch(typeof t){case"string":return t.indexOf("T")>-1?new Date(t):new Date(t.replace(/-/g,"/"));default:return new Date(t)}}function Xi(t,e="yyyy/MM/dd hh:mm:ss"){if(!t&&t!==0)return"";t=ls(t);let n={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),millisecond:t.getMilliseconds()},s=/yyyy|yy|MM|M|dd|d|hh|h|mm|m|ss|s|SSS|SS|S/,o=!0,i=e;for(;o;)o=!1,i=i.replace(s,function(r){return o=!0,Yi[r](n)});return i}function Zi(t,{locale:e="zh",threshold:n=[6e4,36e5],format:s="yyyy/MM/dd hh:mm:ss"}){if(t==="-")return t;if(!t&&t!==0)return"";let o={zh:{year:"\u5E74",month:"\u6708",day:"\u5929",hour:"\u5C0F\u65F6",minute:"\u5206\u949F",second:"\u79D2",ago:"\u524D",later:"\u540E",justNow:"\u521A\u521A",soon:"\u9A6C\u4E0A",template:"{num}{unit}{suffix}"},en:{year:"year",month:"month",day:"day",hour:"hour",minute:"minute",second:"second",ago:"ago",later:"later",justNow:"just now",soon:"soon",template:"{num} {unit} {suffix}"}},i=o[e]||o.zh,r=ls(t),a=r.getTime()-Date.now(),l=Math.abs(a);if(l<n[0])return a<0?i.justNow:i.soon;if(l>=n[1])return Xi(r,s);let c,p,h=i.later;a<0&&(h=i.ago,a=-a);let m=Math.floor(a/1e3),_=Math.floor(m/60),y=Math.floor(_/60),d=Math.floor(y/24),u=Math.floor(d/30),f=Math.floor(u/12);switch(!0){case f>0:c=f,p=i.year;break;case u>0:c=u,p=i.month;break;case d>0:c=d,p=i.day;break;case y>0:c=y,p=i.hour;break;case _>0:c=_,p=i.minute;break;default:c=m,p=i.second;break}return e==="en"&&(c===1?c="a":p+="s"),i.template.replace(/{\s*num\s*}/g,c+"").replace(/{\s*unit\s*}/g,p).replace(/{\s*suffix\s*}/g,h)}var er={name:"uniDateformat",props:{date:{type:[Object,String,Number],default(){return"-"}},locale:{type:String,default:"zh"},threshold:{type:Array,default(){return[0,0]}},format:{type:String,default:"yyyy/MM/dd hh:mm:ss"},refreshRate:{type:[Number,String],default:0}},data(){return{refreshMark:0}},computed:{dateShow(){return this.refreshMark,Zi(this.date,{locale:this.locale,threshold:this.threshold,format:this.format})}},watch:{refreshRate:{handler(){this.setAutoRefresh()},immediate:!0}},methods:{refresh(){this.refreshMark++},setAutoRefresh(){clearInterval(this.refreshInterval),this.refreshRate&&(this.refreshInterval=setInterval(()=>{this.refresh()},parseInt(this.refreshRate)))}}};function tr(t,e,n,s,o,i){return(0,S.openBlock)(),(0,S.createElementBlock)("u-text",null,(0,S.toDisplayString)(i.dateShow),1)}var nr=$(er,[["render",tr]]),sr="No Data",or="Network error",ir="Go to settings",rr="error",ar={noData:sr,noNetwork:or,toSet:ir,error:rr},cr="\u6682\u65E0\u6570\u636E",lr="\u7F51\u7EDC\u5F02\u5E38",ur="\u524D\u5F80\u8BBE\u7F6E",dr="\u9519\u8BEF",hr={noData:cr,noNetwork:lr,toSet:ur,error:dr},fr={en:ar,"zh-Hans":hr},pr="/static/uni-load-state/disconnection.png",gr={box:{"":{flex:1,width:"700rpx",flexDirection:"column",alignItems:"center",justifyContent:"center"}},"uni-load-more":{"":{alignItems:"center",justifyContent:"center"}},"state-text":{"":{textAlign:"center",fontSize:"26rpx",width:"690rpx",paddingTop:"10rpx",paddingRight:"10rpx",paddingBottom:"10rpx",paddingLeft:"10rpx",color:"#999999"}},"icon-image":{"":{width:"300rpx"}},"tip-text":{"":{color:"#999999",fontSize:"32rpx",marginBottom:"30rpx"}},btn:{"":{paddingTop:5,paddingRight:10,paddingBottom:5,paddingLeft:10,width:128,flexDirection:"row",alignItems:"center",justifyContent:"center",textAlign:"center"}},"btn-text":{"":{color:"#999999",fontSize:15}},"btn-default":{"":{borderColor:"#999999",borderStyle:"solid",borderWidth:1,borderRadius:3}},error:{"":{width:"690rpx",color:"#DD524D"}}},{t:Ge}=Je(fr),mr={name:"uni-load-state",computed:{noData(){return Ge("noData")},noNetwork(){return Ge("noNetwork")},toSet(){return Ge("toSet")},error(){return Ge("error")}},data(){return{networkType:""}},props:{state:{type:Object,default(){return{loading:!0,hasMore:!1,pagination:{pages:0},data:[],error:{}}}}},mounted(){uni.onNetworkStatusChange(({networkType:t})=>{this.networkType=="none"&&t!="none"&&this.$emit("networkResume"),this.networkType=t}),uni.getNetworkType({success:({networkType:t})=>{this.networkType=t}})},methods:{appear(){!this.state.loading&&this.state.hasMore&&this.$emit("loadMore")},openSettings(){if(uni.getSystemInfoSync().platform=="ios"){var t=plus.ios.import("UIApplication"),e=t.sharedApplication(),n=plus.ios.import("NSURL"),s=n.URLWithString("App-prefs:root=General");e.openURL(s),plus.ios.deleteObject(s),plus.ios.deleteObject(n),plus.ios.deleteObject(e)}else{var o=plus.android.importClass("android.content.Intent"),i=plus.android.importClass("android.provider.Settings"),r=plus.android.runtimeMainActivity(),a=new o(i.ACTION_SETTINGS);r.startActivity(a)}}}};function yr(t,e,n,s,o,i){return(0,S.openBlock)(),(0,S.createElementBlock)("view",{onAppear:e[1]||(e[1]=(...r)=>i.appear&&i.appear(...r)),renderWhole:!0},[n.state.error?((0,S.openBlock)(),(0,S.createElementBlock)("view",{key:0},[o.networkType=="none"?((0,S.openBlock)(),(0,S.createElementBlock)("view",{key:0,class:"box"},[(0,S.createElementVNode)("u-image",{class:"icon-image",src:pr,mode:"widthFix"}),(0,S.createElementVNode)("u-text",{class:"tip-text"},(0,S.toDisplayString)(i.noNetwork),1),(0,S.createElementVNode)("view",{class:"btn btn-default",onClick:e[0]||(e[0]=(...r)=>i.openSettings&&i.openSettings(...r))},[(0,S.createElementVNode)("u-text",{class:"btn-text"},(0,S.toDisplayString)(i.toSet),1)])])):((0,S.openBlock)(),(0,S.createElementBlock)("u-text",{key:1,class:"error"},(0,S.toDisplayString)(i.error)+"\uFF1A"+(0,S.toDisplayString)(JSON.stringify(n.state.error)),1))])):((0,S.openBlock)(),(0,S.createElementBlock)("u-text",{key:1,class:"state-text"},(0,S.toDisplayString)(n.state.loading?"\u52A0\u8F7D\u4E2D...":n.state.hasMore?"\u4E0A\u62C9\u52A0\u8F7D\u66F4\u591A":"\u6CA1\u6709\u66F4\u591A\u6570\u636E\u4E86"),1))],32)}var _r=$(mr,[["render",yr],["styles",[gr]]]),wr={"uni-status-bar":{"":{height:20}}},br={name:"UniStatusBar",data(){return{statusBarHeight:uni.getSystemInfoSync().statusBarHeight+"px"}}};function vr(t,e,n,s,o,i){return(0,S.openBlock)(),(0,S.createElementBlock)("view",{style:(0,S.normalizeStyle)({height:o.statusBarHeight}),class:"uni-status-bar",renderWhole:!0},[(0,S.renderSlot)(t.$slots,"default")],4)}var Sr=$(br,[["render",vr],["styles",[wr]]]),Rt;Rt=plus.os.name=="iOS";function kr(){var t=!1,e=plus.ios.import("UIApplication"),n=e.sharedApplication(),s=0;if(n.currentUserNotificationSettings){var o=n.currentUserNotificationSettings();s=o.plusGetAttribute("types"),R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:19","enabledTypes1:"+s),s==0?R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:21","\u63A8\u9001\u6743\u9650\u6CA1\u6709\u5F00\u542F"):(t=!0,R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:24","\u5DF2\u7ECF\u5F00\u542F\u63A8\u9001\u529F\u80FD!")),plus.ios.deleteObject(o)}else s=n.enabledRemoteNotificationTypes(),s==0?R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:30","\u63A8\u9001\u6743\u9650\u6CA1\u6709\u5F00\u542F!"):(t=!0,R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:33","\u5DF2\u7ECF\u5F00\u542F\u63A8\u9001\u529F\u80FD!")),R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:35","enabledTypes2:"+s);return plus.ios.deleteObject(n),plus.ios.deleteObject(e),t}function xr(){var t=!1,e=plus.ios.import("CLLocationManager"),n=e.authorizationStatus();return t=n!=2,plus.ios.deleteObject(e),t}function Tr(){var t=!1,e=plus.ios.import("AVAudioSession"),n=e.sharedInstance(),s=n.recordPermission();return R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:70","permissionStatus:"+s),s==1684369017||s==1970168948?R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:72","\u9EA6\u514B\u98CE\u6743\u9650\u6CA1\u6709\u5F00\u542F"):(t=!0,R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:75","\u9EA6\u514B\u98CE\u6743\u9650\u5DF2\u7ECF\u5F00\u542F")),plus.ios.deleteObject(e),t}function Ir(){var t=!1,e=plus.ios.import("AVCaptureDevice"),n=e.authorizationStatusForMediaType("vide");return R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:86","authStatus:"+n),n==3?(t=!0,R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:89","\u76F8\u673A\u6743\u9650\u5DF2\u7ECF\u5F00\u542F")):R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:91","\u76F8\u673A\u6743\u9650\u6CA1\u6709\u5F00\u542F"),plus.ios.deleteObject(e),t}function Ar(){var t=!1,e=plus.ios.import("PHPhotoLibrary"),n=e.authorizationStatus();return R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:102","authStatus:"+n),n==3?(t=!0,R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:105","\u76F8\u518C\u6743\u9650\u5DF2\u7ECF\u5F00\u542F")):R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:107","\u76F8\u518C\u6743\u9650\u6CA1\u6709\u5F00\u542F"),plus.ios.deleteObject(e),t}function Pr(){var t=!1,e=plus.ios.import("CNContactStore"),n=e.authorizationStatusForEntityType(0);return n==3?(t=!0,R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:120","\u901A\u8BAF\u5F55\u6743\u9650\u5DF2\u7ECF\u5F00\u542F")):R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:122","\u901A\u8BAF\u5F55\u6743\u9650\u6CA1\u6709\u5F00\u542F"),plus.ios.deleteObject(e),t}function Cr(){var t=!1,e=plus.ios.import("EKEventStore"),n=e.authorizationStatusForEntityType(0);return n==3?(t=!0,R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:135","\u65E5\u5386\u6743\u9650\u5DF2\u7ECF\u5F00\u542F")):R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:137","\u65E5\u5386\u6743\u9650\u6CA1\u6709\u5F00\u542F"),plus.ios.deleteObject(e),t}function Lr(){var t=!1,e=plus.ios.import("EKEventStore"),n=e.authorizationStatusForEntityType(1);return n==3?(t=!0,R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:150","\u5907\u5FD8\u5F55\u6743\u9650\u5DF2\u7ECF\u5F00\u542F")):R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:152","\u5907\u5FD8\u5F55\u6743\u9650\u6CA1\u6709\u5F00\u542F"),plus.ios.deleteObject(e),t}function Or(t){return new Promise((e,n)=>{plus.android.requestPermissions([t],function(s){for(var o=0,i=0;i<s.granted.length;i++){var r=s.granted[i];R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:167","\u5DF2\u83B7\u53D6\u7684\u6743\u9650\uFF1A"+r),o=1}for(var i=0;i<s.deniedPresent.length;i++){var a=s.deniedPresent[i];R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:172","\u62D2\u7EDD\u672C\u6B21\u7533\u8BF7\u7684\u6743\u9650\uFF1A"+a),o=0}for(var i=0;i<s.deniedAlways.length;i++){var l=s.deniedAlways[i];R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:177","\u6C38\u4E45\u62D2\u7EDD\u7533\u8BF7\u7684\u6743\u9650\uFF1A"+l),o=-1}e(o)},function(s){R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:187","\u7533\u8BF7\u6743\u9650\u9519\u8BEF\uFF1A"+s.code+" = "+s.message),e({code:s.code,message:s.message})})})}function Er(t){return t=="location"?xr():t=="camera"?Ir():t=="photoLibrary"?Ar():t=="record"?Tr():t=="push"?kr():t=="contact"?Pr():t=="calendar"?Cr():t=="memo"?Lr():!1}function Rr(){if(Rt){var t=plus.ios.import("UIApplication"),e=t.sharedApplication(),n=plus.ios.import("NSURL"),s=n.URLWithString("app-settings:");e.openURL(s),plus.ios.deleteObject(s),plus.ios.deleteObject(n),plus.ios.deleteObject(e)}else{var o=plus.android.importClass("android.content.Intent"),i=plus.android.importClass("android.provider.Settings"),r=plus.android.importClass("android.net.Uri"),a=plus.android.runtimeMainActivity(),l=new o;l.setAction(i.ACTION_APPLICATION_DETAILS_SETTINGS);var c=r.fromParts("package",a.getPackageName(),null);l.setData(c),a.startActivity(l)}}function jr(){if(Rt){var e=!1,t=plus.ios.import("CLLocationManager"),e=t.locationServicesEnabled();return plus.ios.deleteObject(t),e}else{var n=plus.android.importClass("android.content.Context"),s=plus.android.importClass("android.location.LocationManager"),o=plus.android.runtimeMainActivity(),i=o.getSystemService(n.LOCATION_SERVICE),e=i.isProviderEnabled(s.GPS_PROVIDER);return R("log","at uni_modules/json-gps/js_sdk/wa-permission/permission.js:262","\u7CFB\u7EDF\u5B9A\u4F4D\u5F00\u542F:"+e),e}}var Qe={judgeIosPermission:Er,requestAndroidPermission:Or,checkSystemEnableLocation:jr,gotoAppPermissionSetting:Rr},Et=class{constructor(e){this.lock=!1}getLocation(){return L(this,arguments,function*(e={type:"wgs84"}){return new Promise(n=>L(this,null,function*(){if(this.lock)return n(!1),!1;this.lock=!0,uni.getLocation(K(j({},e),{success:s=>{this.lock=!1,n(s)},fail:s=>L(this,null,function*(){uni.showToast({title:"\u5B9A\u4F4D\u83B7\u53D6\u5931\u8D25",icon:"none"}),R("error","at uni_modules/json-gps/js_sdk/gps.js:30",s),n(!1),yield this.checkGpsIsOpen()})}))}))})}checkGpsIsOpen(){return L(this,null,function*(){if(this.lock=!0,!Qe.checkSystemEnableLocation())return plus.nativeUI.confirm("\u624B\u673A\u5B9A\u4F4D\u6743\u9650\u6CA1\u6709\u5F00\u542F\uFF0C\u662F\u5426\u53BB\u5F00\u542F\uFF1F",n=>{if(this.lock=!1,n.index==0)if(uni.getSystemInfoSync().platform=="ios")plus.runtime.openURL("app-settings://");else{var s=plus.android.runtimeMainActivity(),o=plus.android.importClass("android.content.Intent"),i=plus.android.importClass("android.provider.Settings"),r=new o(i.ACTION_LOCATION_SOURCE_SETTINGS);s.startActivity(r)}else uni.showToast({title:"\u8BBE\u5907\u65E0\u5B9A\u4F4D\u6743\u9650",icon:"none"}),callback(!1)},{buttons:["\u53BB\u8BBE\u7F6E","\u4E0D\u5F00\u542F"],verticalAlign:"center"}),!1;(yield this.checkAppGps())?this.lock=!1:plus.nativeUI.confirm("\u5E94\u7528\u5B9A\u4F4D\u6743\u9650\u6CA1\u6709\u5F00\u542F\uFF0C\u662F\u5426\u53BB\u5F00\u542F\uFF1F",n=>{if(this.lock=!1,n.index==0)Qe.gotoAppPermissionSetting(),callback(!1);else return uni.showToast({title:"\u5E94\u7528\u65E0\u5B9A\u4F4D\u6743\u9650",icon:"none"}),!1},{buttons:["\u53BB\u8BBE\u7F6E","\u4E0D\u5F00\u542F"],verticalAlign:"center"})})}checkAppGps(){return L(this,null,function*(){return!(uni.getSystemInfoSync().platform=="ios"&&!Qe.judgeIosPermission("location")||uni.getSystemInfoSync().platform!="ios"&&(yield Qe.requestAndroidPermission("android.permission.ACCESS_FINE_LOCATION"))!=1)})}},Dr={pages:{"":{backgroundColor:"#FFFFFF"}},avatar:{"":{width:"200rpx",height:"200rpx",marginRight:"10rpx"}},main:{"":{justifyContent:"space-between",flex:1}},title:{"":{fontSize:16}},info:{"":{flexDirection:"row",justifyContent:"space-between"}},author:{"":{fontSize:14,color:"#999999"}},last_modify_date:{"":{fontSize:14,color:"#999999"}},"uni-search-box":{"":{backgroundColor:"#FFFFFF",position:"sticky",height:50,top:0,left:0}},"cover-search-bar":{"":{height:50,position:"relative",top:-50,marginBottom:-50}}},Ot,Nr=new Et,cs=ue.database(),Mr={components:{statusBar:Sr},computed:{inputPlaceholder(t){return uni.getStorageSync("CURRENT_LANG")=="en"?"Please enter the search content":"\u8BF7\u8F93\u5165\u641C\u7D22\u5185\u5BB9"},colList(){return[cs.collection("opendb-news-articles").where(this.where).field("avatar,title,last_modify_date,user_id").getTemp(),cs.collection("uni-id-users").field("_id,nickname").getTemp()]}},data(){return{where:'"article_status" == 1',keyword:"",showRefresh:!1,listHight:0}},watch:{keyword(t,e){let n='"article_status" == 1 ';t?this.where=n+`&& /${t}/.test(title)`:this.where=n}},onReady(){return L(this,null,function*(){this.listHight=uni.getSystemInfoSync().windowHeight-uni.getSystemInfoSync().statusBarHeight-50+"px",Ot=this.$refs.udb})},onShow(){return L(this,null,function*(){this.keyword=getApp().globalData.searchText,getApp().globalData.searchText="",yield Nr.getLocation({geocode:!0})})},methods:{searchClick(t){uni.hideKeyboard(),uni.navigateTo({url:"/pages/list/search/search",animationType:"fade-in"})},retry(){this.refresh()},refresh(){Ot.loadData({clear:!0},()=>{uni.stopPullDownRefresh(),this.showRefresh=!1,R("log","at pages/list/list.nvue:157","end")}),R("log","at pages/list/list.nvue:159","refresh")},loadMore(){Ot.loadMore()},onqueryerror(t){R("error","at pages/list/list.nvue:165",t)},onpullingdown(t){R("log","at pages/list/list.nvue:168",t),this.showRefresh=!0,t.pullingDistance>100&&this.refresh()}}};function Ur(t,e,n,s,o,i){let r=(0,S.resolveComponent)("statusBar"),a=W((0,S.resolveDynamicComponent)("uni-search-bar"),os),l=W((0,S.resolveDynamicComponent)("refreshBox"),Qi),c=W((0,S.resolveDynamicComponent)("uni-dateformat"),nr),p=W((0,S.resolveDynamicComponent)("uni-list-item"),is),h=W((0,S.resolveDynamicComponent)("uni-load-state"),_r),m=W((0,S.resolveDynamicComponent)("uni-list"),rs),_=W((0,S.resolveDynamicComponent)("unicloud-db"),as);return(0,S.openBlock)(),(0,S.createElementBlock)("scroll-view",{scrollY:!0,showScrollbar:!0,enableBackToTop:!0,bubble:"true",style:{flexDirection:"column"}},[(0,S.createElementVNode)("view",{class:"pages"},[(0,S.createVNode)(r),(0,S.createElementVNode)("view",{class:"uni-search-box"},[(0,S.createVNode)(a,{modelValue:o.keyword,"onUpdate:modelValue":e[0]||(e[0]=y=>o.keyword=y),ref:"searchBar",radius:"100",cancelButton:"none",disabled:"",placeholder:i.inputPlaceholder},null,8,["modelValue","placeholder"]),(0,S.createElementVNode)("view",{class:"cover-search-bar",onClick:e[1]||(e[1]=(...y)=>i.searchClick&&i.searchClick(...y))})]),(0,S.createVNode)(_,{ref:"udb",onError:i.onqueryerror,collection:i.colList,"page-size":10},{default:(0,S.withCtx)(({data:y,pagination:d,hasMore:u,loading:f,error:w,options:v})=>[(0,S.createVNode)(m,{class:"uni-list",border:!1,style:(0,S.normalizeStyle)({height:o.listHight})},{default:(0,S.withCtx)(()=>[(0,S.createVNode)(l,{onRefresh:i.refresh,loading:f},null,8,["onRefresh","loading"]),((0,S.openBlock)(!0),(0,S.createElementBlock)(S.Fragment,null,(0,S.renderList)(y,(b,A)=>((0,S.openBlock)(),(0,S.createBlock)(p,{to:"/pages/list/detail?id="+b._id+"&title="+b.title,key:A},{header:(0,S.withCtx)(()=>[(0,S.createElementVNode)("u-image",{class:"avatar",src:b.avatar,mode:"aspectFill"},null,8,["src"])]),body:(0,S.withCtx)(()=>[(0,S.createElementVNode)("view",{class:"main"},[(0,S.createElementVNode)("u-text",{class:"title"},(0,S.toDisplayString)(b.title),1),(0,S.createElementVNode)("view",{class:"info"},[(0,S.createElementVNode)("u-text",{class:"author"},(0,S.toDisplayString)(b.user_id[0]?b.user_id[0].nickname:""),1),(0,S.createVNode)(c,{class:"last_modify_date",date:b.last_modify_date,format:"yyyy-MM-dd",threshold:[6e4,2592e6]},null,8,["date"])])])]),_:2},1032,["to"]))),128)),(0,S.createVNode)(p,null,{body:(0,S.withCtx)(()=>[(0,S.createVNode)(h,{onNetworkResume:i.refresh,state:{data:y,pagination:d,hasMore:u,loading:f,error:w},onLoadMore:i.loadMore},null,8,["onNetworkResume","state","onLoadMore"])]),_:2},1024)]),_:2},1032,["style"])]),_:1},8,["onError","collection"])])])}var Ye=$(Mr,[["render",Ur],["styles",[Dr]]]);var jt=plus.webview.currentWebview();if(jt){let t=parseInt(jt.id),e="pages/list/list",n={};try{n=JSON.parse(jt.__query__)}catch(o){}Ye.mpType="page";let s=Vue.createPageApp(Ye,{$store:getApp({allowDefault:!0}).$store,__pageId:t,__pagePath:e,__pageQuery:n});s.provide("__globalStyles",Vue.useCssStyles([...__uniConfig.styles,...Ye.styles||[]])),s.mount("#root")}})();
/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
